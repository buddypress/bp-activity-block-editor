(()=>{var e,t={367:function(e,t){var n,o;n=function(e,t){"use strict";var n,o,r="function"==typeof Map?new Map:(n=[],o=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return o[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),o.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o.splice(t,1))}}),i=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function s(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t=null,n=null,o=null,s=function(){e.clientWidth!==n&&u()},a=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",u,!1),e.removeEventListener("keyup",u,!1),e.removeEventListener("autosize:destroy",a,!1),e.removeEventListener("autosize:update",u,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",a,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",u,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",u,!1),e.addEventListener("autosize:update",u,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:a,update:u}),"vertical"===(l=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===l.resize&&(e.style.resize="horizontal"),t="content-box"===l.boxSizing?-(parseFloat(l.paddingTop)+parseFloat(l.paddingBottom)):parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth),isNaN(t)&&(t=0),u()}var l;function c(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var o=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",n=e.clientWidth,o.forEach((function(e){e.node.scrollTop=e.scrollTop})),r&&(document.documentElement.scrollTop=r)}}function u(){d();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r<t?"hidden"===n.overflowY&&(c("scroll"),d(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),d(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),o!==r){o=r;var s=i("autosize:resized");try{e.dispatchEvent(s)}catch(e){}}}}function a(e){var t=r.get(e);t&&t.destroy()}function l(e){var t=r.get(e);t&&t.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return s(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],a),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=c,e.exports=t.default},void 0===(o=n.apply(t,[e,t]))||(e.exports=o)},244:(e,t,n)=>{"use strict";var o={};n.r(o),n.d(o,{closeModal:()=>ee,disableComplementaryArea:()=>j,enableComplementaryArea:()=>K,openModal:()=>Q,pinItem:()=>$,setDefaultComplementaryArea:()=>Y,setFeatureDefaults:()=>X,setFeatureValue:()=>Z,toggleFeature:()=>J,unpinItem:()=>q});var r={};n.r(r),n.d(r,{getActiveComplementaryArea:()=>te,isComplementaryAreaLoading:()=>ne,isFeatureActive:()=>re,isItemPinned:()=>oe,isModalActive:()=>ie});var i={};n.r(i),n.d(i,{getCanvasStyles:()=>Zn,getCurrentPattern:()=>Gn,getCurrentPatternName:()=>zn,getEditorMode:()=>Fn,getEditorSettings:()=>Un,getIgnoredContent:()=>Hn,getNamedPattern:()=>Wn,getPatterns:()=>$n,getPreviewDeviceType:()=>Jn,isEditing:()=>jn,isEditorReady:()=>Vn,isEditorSidebarOpened:()=>Kn,isIframePreview:()=>Xn,isInserterOpened:()=>Yn,isListViewOpened:()=>qn});var s={};n.r(s),n.d(s,{getBlocks:()=>Qn,getEditCount:()=>oo,getEditorSelection:()=>eo,hasEditorRedo:()=>no,hasEditorUndo:()=>to});var a={};n.r(a),n.d(a,{isFeatureActive:()=>ro});var l={};n.r(l),n.d(l,{isOptionActive:()=>io});var c={};n.r(c),n.d(c,{__experimentalConvertBlockToStatic:()=>so,__experimentalConvertBlocksToReusable:()=>ao,__experimentalDeleteReusableBlock:()=>lo,__experimentalSetEditingReusableBlock:()=>co});var d={};n.r(d),n.d(d,{__experimentalIsEditingReusableBlock:()=>uo});var u={};n.r(u),n.d(u,{disableComplementaryArea:()=>Eo,enableComplementaryArea:()=>fo,pinItem:()=>go,setDefaultComplementaryArea:()=>mo,setFeatureDefaults:()=>_o,setFeatureValue:()=>yo,toggleFeature:()=>bo,unpinItem:()=>ho});var p={};n.r(p),n.d(p,{getActiveComplementaryArea:()=>vo,isFeatureActive:()=>To,isItemPinned:()=>wo});var m={};n.r(m),n.d(m,{getActiveComponents:()=>Do,getActivityDate:()=>Yo,getActivityEdits:()=>zo,getActivityGroup:()=>Ko,getBlocks:()=>Go,getContent:()=>Vo,getCurrentUser:()=>Fo,getJustPostedActivity:()=>Wo,getUserGroups:()=>Uo,isInsertingActivity:()=>Ho});var f={};n.r(f),n.d(f,{createFromAPI:()=>Qo,fetchFromAPI:()=>Xo,getCurrentUser:()=>Jo,getUserGroups:()=>Zo,resetActivityGroup:()=>sr,resetJustPostedActivity:()=>or,saveActivity:()=>qo,setActiveComponents:()=>$o,setActivityDate:()=>rr,setActivityGroup:()=>ir,updateActivityEdits:()=>nr,updateContent:()=>tr,updateFromAPI:()=>er});var E={};n.r(E),n.d(E,{getCurrentUser:()=>ar,getUserGroups:()=>lr});var g=n(196);const h=window.wp.element,b=window.wp.i18n,y=window.wp.domReady;var _=n.n(y);const v=window.wp.data,w=window.wp.richText,T=window.wp.editor,S=window.wp.components,k=window.wp.blockLibrary,C=(window.wp.formatLibrary,window.wp.keyboardShortcuts);var A=n(967),I=n.n(A);const P=window.wp.compose,R=window.lodash,x=["button","submit"],O=(0,P.createHigherOrderComponent)((e=>class extends h.Component{constructor(){super(...arguments),this.bindNode=this.bindNode.bind(this),this.cancelBlurCheck=this.cancelBlurCheck.bind(this),this.queueBlurCheck=this.queueBlurCheck.bind(this),this.normalizeButtonFocus=this.normalizeButtonFocus.bind(this)}componentWillUnmount(){clearTimeout(this.blurCheckTimeout)}bindNode(e){e?this.node=e:(delete this.node,this.cancelBlurCheck())}queueBlurCheck(e){e.persist(),this.preventBlurCheck||(this.blurCheckTimeout=setTimeout((()=>{document.hasFocus()?"function"==typeof this.node.handleFocusOutside&&this.node.handleFocusOutside(e):e.preventDefault()}),0))}cancelBlurCheck(){clearTimeout(this.blurCheckTimeout),void 0!==this.node&&"function"==typeof this.node.handleFocus&&this.node.handleFocus(event)}normalizeButtonFocus(e){const{type:t,target:n}=e;(0,R.includes)(["mouseup","touchend"],t)?this.preventBlurCheck=!1:function(e){switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,R.includes)(x,e.type)}return!1}(n)&&(this.preventBlurCheck=!0)}render(){return(0,g.createElement)("div",{onFocus:this.cancelBlurCheck,onMouseDown:this.normalizeButtonFocus,onMouseUp:this.normalizeButtonFocus,onTouchStart:this.normalizeButtonFocus,onTouchEnd:this.normalizeButtonFocus,onBlur:this.queueBlurCheck},(0,g.createElement)(e,{ref:this.bindNode,...this.props}))}}),"withFocusOutside")(class extends h.Component{handleFocus(e){this.props.onFocus()}isInspectorElement(e){return!!(e.closest(".components-color-picker")||e.closest(".block-editor-block-inspector")||e.closest(".iso-inspector")||e.classList.contains("media-modal"))}handleFocusOutside(e){const t=e.relatedTarget||e.target;t&&this.isInspectorElement(t)||this.props.onOutside()}render(){return this.props.children}}),N=window.wp.blocks,B=window.wp.blockEditor,M=window.wp.keycodes,L=window.wp.primitives,D=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),F=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),U=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),V=window.wp.viewport,z=window.wp.preferences,G=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),H=window.wp.deprecated;var W=n.n(H);const Y=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),K=(e,t)=>({registry:n,dispatch:o})=>{t&&(n.select(z.store).get(e,"isComplementaryAreaVisible")||n.dispatch(z.store).set(e,"isComplementaryAreaVisible",!0),o({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},j=e=>({registry:t})=>{t.select(z.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(z.store).set(e,"isComplementaryAreaVisible",!1)},$=(e,t)=>({registry:n})=>{if(!t)return;const o=n.select(z.store).get(e,"pinnedItems");!0!==o?.[t]&&n.dispatch(z.store).set(e,"pinnedItems",{...o,[t]:!0})},q=(e,t)=>({registry:n})=>{if(!t)return;const o=n.select(z.store).get(e,"pinnedItems");n.dispatch(z.store).set(e,"pinnedItems",{...o,[t]:!1})};function J(e,t){return function({registry:n}){W()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(z.store).toggle(e,t)}}function Z(e,t,n){return function({registry:o}){W()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),o.dispatch(z.store).set(e,t,!!n)}}function X(e,t){return function({registry:n}){W()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(z.store).setDefaults(e,t)}}function Q(e){return{type:"OPEN_MODAL",name:e}}function ee(){return{type:"CLOSE_MODAL"}}const te=(0,v.createRegistrySelector)((e=>(t,n)=>{const o=e(z.store).get(n,"isComplementaryAreaVisible");if(void 0!==o)return!1===o?null:t?.complementaryAreas?.[n]})),ne=(0,v.createRegistrySelector)((e=>(t,n)=>{const o=e(z.store).get(n,"isComplementaryAreaVisible"),r=t?.complementaryAreas?.[n];return o&&void 0===r})),oe=(0,v.createRegistrySelector)((e=>(t,n,o)=>{var r;const i=e(z.store).get(n,"pinnedItems");return null===(r=i?.[o])||void 0===r||r})),re=(0,v.createRegistrySelector)((e=>(t,n,o)=>(W()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(z.store).get(n,o))));function ie(e,t){return e.activeModal===t}const se=(0,v.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}}),ae=(0,v.createReduxStore)("core/interface",{reducer:se,actions:o,selectors:r});(0,v.register)(ae);const le=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),ce=le((function({as:e=S.Button,scope:t,identifier:n,icon:o,selectedIcon:r,name:i,...s}){const a=e,l=(0,v.useSelect)((e=>e(ae).getActiveComplementaryArea(t)===n),[n,t]),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,v.useDispatch)(ae);return(0,g.createElement)(a,{icon:r&&l?r:o,"aria-controls":n.replace("/",":"),onClick:()=>{l?d(t):c(t,n)},...s})})),de=({smallScreenTitle:e,children:t,className:n,toggleButtonProps:o})=>{const r=(0,g.createElement)(ce,{icon:G,...o});return(0,g.createElement)(g.Fragment,null,(0,g.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},e&&(0,g.createElement)("h2",{className:"interface-complementary-area-header__small-title"},e),r),(0,g.createElement)("div",{className:I()("components-panel__header","interface-complementary-area-header",n),tabIndex:-1},t,r))},ue=()=>{};function pe({name:e,as:t=S.Button,onClick:n,...o}){return(0,g.createElement)(S.Fill,{name:e},(({onClick:e})=>(0,g.createElement)(t,{onClick:n||e?(...t)=>{(n||ue)(...t),(e||ue)(...t)}:void 0,...o})))}pe.Slot=function({name:e,as:t=S.ButtonGroup,fillProps:n={},bubblesVirtually:o,...r}){return(0,g.createElement)(S.Slot,{name:e,bubblesVirtually:o,fillProps:n},(e=>{if(!h.Children.toArray(e).length)return null;const n=[];h.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&n.push(t)}));const o=h.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&n.includes(e.props.__unstableTarget)?null:e));return(0,g.createElement)(t,{...r},o)}))};const me=pe,fe=({__unstableExplicitMenuItem:e,__unstableTarget:t,...n})=>(0,g.createElement)(S.MenuItem,{...n});function Ee({scope:e,target:t,__unstableExplicitMenuItem:n,...o}){return(0,g.createElement)(ce,{as:o=>(0,g.createElement)(me,{__unstableExplicitMenuItem:n,__unstableTarget:`${e}/${t}`,as:fe,name:`${e}/plugin-more-menu`,...o}),role:"menuitemcheckbox",selectedIcon:D,name:t,scope:e,...o})}function ge({scope:e,...t}){return(0,g.createElement)(S.Fill,{name:`PinnedItems/${e}`,...t})}ge.Slot=function({scope:e,className:t,...n}){return(0,g.createElement)(S.Slot,{name:`PinnedItems/${e}`,...n},(e=>e?.length>0&&(0,g.createElement)("div",{className:I()(t,"interface-pinned-items")},e)))};const he=ge;function be({scope:e,children:t,className:n,id:o}){return(0,g.createElement)(S.Fill,{name:`ComplementaryArea/${e}`},(0,g.createElement)("div",{id:o,className:n},t))}const ye=le((function({children:e,className:t,closeLabel:n=(0,b.__)("Close plugin"),identifier:o,header:r,headerClassName:i,icon:s,isPinnable:a=!0,panelClassName:l,scope:c,name:d,smallScreenTitle:u,title:p,toggleShortcut:m,isActiveByDefault:f}){const{isLoading:E,isActive:y,isPinned:_,activeArea:w,isSmall:T,isLarge:k,showIconLabels:C}=(0,v.useSelect)((e=>{const{getActiveComplementaryArea:t,isComplementaryAreaLoading:n,isItemPinned:r}=e(ae),{get:i}=e(z.store),s=t(c);return{isLoading:n(c),isActive:s===o,isPinned:r(c,o),activeArea:s,isSmall:e(V.store).isViewportMatch("< medium"),isLarge:e(V.store).isViewportMatch("large"),showIconLabels:i("core","showIconLabels")}}),[o,c]);!function(e,t,n,o,r){const i=(0,h.useRef)(!1),s=(0,h.useRef)(!1),{enableComplementaryArea:a,disableComplementaryArea:l}=(0,v.useDispatch)(ae);(0,h.useEffect)((()=>{o&&r&&!i.current?(l(e),s.current=!0):s.current&&!r&&i.current?(s.current=!1,a(e,t)):s.current&&n&&n!==t&&(s.current=!1),r!==i.current&&(i.current=r)}),[o,r,e,t,n,l,a])}(c,o,w,y,T);const{enableComplementaryArea:A,disableComplementaryArea:P,pinItem:R,unpinItem:x}=(0,v.useDispatch)(ae);return(0,h.useEffect)((()=>{f&&void 0===w&&!T?A(c,o):void 0===w&&T&&P(c,o)}),[w,f,c,o,T,A,P]),(0,g.createElement)(g.Fragment,null,a&&(0,g.createElement)(he,{scope:c},_&&(0,g.createElement)(ce,{scope:c,identifier:o,isPressed:y&&(!C||k),"aria-expanded":y,"aria-disabled":E,label:p,icon:C?D:s,showTooltip:!C,variant:C?"tertiary":void 0,size:"compact"})),d&&a&&(0,g.createElement)(Ee,{target:d,scope:c,icon:s},p),y&&(0,g.createElement)(be,{className:I()("interface-complementary-area",t),scope:c,id:o.replace("/",":")},(0,g.createElement)(de,{className:i,closeLabel:n,onClose:()=>P(c),smallScreenTitle:u,toggleButtonProps:{label:n,shortcut:m,scope:c,identifier:o}},r||(0,g.createElement)(g.Fragment,null,(0,g.createElement)("h2",{className:"interface-complementary-area-header__title"},p),a&&(0,g.createElement)(S.Button,{className:"interface-complementary-area__pin-unpin-item",icon:_?F:U,label:_?(0,b.__)("Unpin from toolbar"):(0,b.__)("Pin to toolbar"),onClick:()=>(_?x:R)(c,o),isPressed:_,"aria-expanded":_}))),(0,g.createElement)(S.Panel,{className:l},e)))}));ye.Slot=function({scope:e,...t}){return(0,g.createElement)(S.Slot,{name:`ComplementaryArea/${e}`,...t})};const _e=ye,ve=({isActive:e})=>((0,h.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,h.useEffect)((()=>(e?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{e&&document.body.classList.remove("is-fullscreen-mode")})),[e]),null);function we({children:e,className:t,ariaLabel:n,as:o="div",...r}){return(0,g.createElement)(o,{className:I()("interface-navigable-region",t),"aria-label":n,role:"region",tabIndex:"-1",...r},e)}const Te={hidden:{opacity:0},hover:{opacity:1,transition:{type:"tween",delay:.2,delayChildren:.2}},distractionFreeInactive:{opacity:1,transition:{delay:0}}},Se=(0,h.forwardRef)((function({isDistractionFree:e,footer:t,header:n,editorNotices:o,sidebar:r,secondarySidebar:i,notices:s,content:a,actions:l,labels:c,className:d,enableRegionNavigation:u=!0,shortcuts:p},m){const f=(0,S.__unstableUseNavigateRegions)(p);!function(e){(0,h.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const E={
/* translators: accessibility text for the top bar landmark region. */
header:(0,b._x)("Header","header landmark area"),
/* translators: accessibility text for the content landmark region. */
body:(0,b.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,b.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,b.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,b.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,b.__)("Footer"),...c};return(0,g.createElement)("div",{...u?f:{},ref:(0,P.useMergeRefs)([m,u?f.ref:void 0]),className:I()(d,"interface-interface-skeleton",f.className,!!t&&"has-footer")},(0,g.createElement)("div",{className:"interface-interface-skeleton__editor"},!!n&&(0,g.createElement)(we,{as:S.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":E.header,initial:e?"hidden":"distractionFreeInactive",whileHover:e?"hover":"distractionFreeInactive",animate:e?"hidden":"distractionFreeInactive",variants:Te,transition:e?{type:"tween",delay:.8}:void 0},n),e&&(0,g.createElement)("div",{className:"interface-interface-skeleton__header"},o),(0,g.createElement)("div",{className:"interface-interface-skeleton__body"},!!i&&(0,g.createElement)(we,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:E.secondarySidebar},i),!!s&&(0,g.createElement)("div",{className:"interface-interface-skeleton__notices"},s),(0,g.createElement)(we,{className:"interface-interface-skeleton__content",ariaLabel:E.body},a),!!r&&(0,g.createElement)(we,{className:"interface-interface-skeleton__sidebar",ariaLabel:E.sidebar},r),!!l&&(0,g.createElement)(we,{className:"interface-interface-skeleton__actions",ariaLabel:E.actions},l))),!!t&&(0,g.createElement)(we,{className:"interface-interface-skeleton__footer",ariaLabel:E.footer},t))})),ke=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})),Ce=window.wp.privateApis,{unlock:Ae}=(0,Ce.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.","@wordpress/edit-post"),Ie={document:"edit-post/document",block:"edit-post/block"},{Tabs:Pe}=Ae(S.privateApis),Re=({documentInspector:e})=>{const{documentLabel:t}=(0,v.useSelect)((t=>({
// translators: Default label for the Document sidebar tab, not selected.
documentLabel:e&&"string"==typeof e?e:(0,b._x)("Document","noun")})),[]);return(0,g.createElement)(Pe.TabList,null,!!e&&(0,g.createElement)(Pe.Tab,{tabId:Ie.document},t),(0,g.createElement)(Pe.Tab,{tabId:Ie.block},(0,b.__)("Block")))},{Fill:xe,Slot:Oe}=(0,S.createSlotFill)("PluginDocumentSettingPanel"),Ne=({children:e})=>(0,g.createElement)(xe,null,e);Ne.Slot=function(e){return(0,g.createElement)(Oe,null,(e=>e||(0,g.createElement)("span",{className:"block-editor-block-inspector__no-blocks"},(0,b.__)("Nothing to display"))))};const Be=Ne;function Me({as:e=S.Button,scope:t,identifier:n,icon:o,selectedIcon:r,name:i,...s}){const a=e,l=(0,v.useSelect)((e=>e(ae).getActiveComplementaryArea(t)===n),[n]),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,v.useDispatch)(ae);return(0,g.createElement)(a,{icon:r&&l?r:o,onClick:()=>{l?d(t):c(t,n)},...s})}const Le=({smallScreenTitle:e,children:t,className:n,toggleButtonProps:o})=>{const r=(0,g.createElement)(Me,{icon:G,...o});return(0,g.createElement)(g.Fragment,null,(0,g.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},e&&(0,g.createElement)("span",{className:"interface-complementary-area-header__small-title"},e),r),(0,g.createElement)("div",{className:I()("components-panel__header","interface-complementary-area-header",n),tabIndex:-1},t,r))};function De({scope:e,children:t,className:n}){return(0,g.createElement)(S.Fill,{name:`ComplementaryArea/${e}`},(0,g.createElement)("div",{className:n},t))}function Fe({className:e,children:t,header:n,headerClassName:o,toggleShortcut:r,closeLabel:i,title:s,identifier:a,...l}){const{postTitle:c,isActive:d}=(0,v.useSelect)((e=>{const{getActiveComplementaryArea:t}=e(ae),n=t("isolated/editor");return{postTitle:"",showIconLabels:e("isolated/editor").isFeatureActive("showIconLabels"),isActive:(o=n,["edit-post/document","edit-post/block"].includes(o))};var o}),[]);return d?(0,g.createElement)(De,{className:"interface-complementary-area",scope:"isolated/editor"},(0,g.createElement)(Le,{className:o,smallScreenTitle:c||(0,b.__)("(no title)"),toggleButtonProps:{label:i,shortcut:r,scope:"isolated/editor",identifier:a}},n),(0,g.createElement)(S.Panel,{className:"edit-post-sidebar"},t)):null}const{Tabs:Ue}=Ae(S.privateApis),Ve=({documentInspector:e,keyboardShortcut:t,sidebarName:n})=>{const o=(0,h.useContext)(Ue.Context);return(0,g.createElement)(Fe,{className:"iso-sidebar",identifier:n,header:(0,g.createElement)(Ue.Context.Provider,{value:o},(0,g.createElement)(Re,{documentInspector:e})),closeLabel:(0,b.__)("Close settings"),headerClassName:"edit-post-sidebar__panel-tabs"
/* translators: button label text should, if possible, be under 16 characters. */,title:(0,b.__)("Settings"),toggleShortcut:t,icon:ke,isActiveByDefault:!1},(0,g.createElement)(Ue.Context.Provider,{value:o},(0,g.createElement)(Ue.TabPanel,{tabId:Ie.document,focusable:!1},(0,g.createElement)(Be.Slot,null)),(0,g.createElement)(Ue.TabPanel,{tabId:Ie.block,focusable:!1},(0,g.createElement)(B.BlockInspector,null))))},ze=({documentInspector:e})=>{const{sidebarName:t,keyboardShortcut:n,isSettingsSidebarActive:o}=(0,v.useSelect)((e=>{let t=e(ae).getActiveComplementaryArea("isolated/editor"),n=!0;var o;return o=t,[Ie.document,Ie.block].includes(o)||(n=!1,e(B.store).getBlockSelectionStart()&&(t=Ie.block),t=Ie.document),{sidebarName:t,keyboardShortcut:e(C.store).getShortcutRepresentation("core/edit-post/toggle-sidebar"),isSettingsSidebarActive:n}}),[]),{openGeneralSidebar:r}=(0,v.useDispatch)("isolated/editor");return(0,g.createElement)(Ue,{selectedTabId:o?t:null,onSelect:r},(0,g.createElement)(Ve,{documentInspector:e,keyboardShortcut:n,sidebarName:t}))},{Fill:Ge,Slot:He}=(0,S.createSlotFill)("IsolatedEditorHeading"),We=({children:e})=>(0,g.createElement)(Ge,null,e);We.Slot=function(e){return(0,g.createElement)(He,null,(e=>e))};const Ye=We,{Fill:Ke,Slot:je}=(0,S.createSlotFill)("IsolatedFooter"),$e=({children:e})=>(0,g.createElement)(Ke,null,e);$e.Slot=function(e){return(0,g.createElement)(je,null,(e=>e))};const qe=$e,{LayoutStyle:Je,useLayoutClasses:Ze,useLayoutStyles:Xe,ExperimentalBlockCanvas:Qe}=Ae(B.privateApis);function et(e){for(let t=0;t<e.length;t++){if("core/post-content"===e[t].name)return e[t].attributes;if(e[t].innerBlocks.length){const n=et(e[t].innerBlocks);if(n)return n}}}function tt(e){for(let t=0;t<e.length;t++)if("core/post-content"===e[t].name)return!0;return!1}function nt({styles:e}){const{deviceType:t,isWelcomeGuideVisible:n,isTemplateMode:o,postContentAttributes:r,editedPostTemplate:i={},wrapperBlockName:s,wrapperUniqueId:a,isBlockBasedTheme:l,hasV3BlocksOnly:c}=(0,v.useSelect)((e=>{const{isFeatureActive:t}=e("isolated/editor"),{getCurrentPostId:n,getCurrentPostType:o,getEditorSettings:r}=e(T.store),{getBlockTypes:i}=e(N.store);let s;s="wp_block"===o()?"core/block":"core/post-content";const a=r();return{deviceType:"Desktop",isWelcomeGuideVisible:t("welcomeGuide"),isTemplateMode:!1,postContentAttributes:r().postContentAttributes,editedPostTemplate:void 0,wrapperBlockName:s,wrapperUniqueId:n(),isBlockBasedTheme:a.__unstableIsBlockBasedTheme,hasV3BlocksOnly:i().every((e=>e.apiVersion>=3))}}),[]),{isCleanNewPost:d}=(0,v.useSelect)(T.store),{themeHasDisabledLayoutStyles:u,themeSupportsLayout:p}=(0,v.useSelect)((e=>{const t=e(B.store).getSettings();return{themeHasDisabledLayoutStyles:t.disableLayoutStyles,themeSupportsLayout:t.supportsLayout,isFocusMode:t.focusMode,hasRootPaddingAwareAlignments:t.__experimentalFeatures?.useRootPaddingAwareAlignments}}),[]),m={height:"100%",width:"100%",marginLeft:"auto",marginRight:"auto",display:"flex",flexFlow:"column",background:"white"},f={...m,borderRadius:"2px 2px 0 0",border:"1px solid #ddd",borderBottom:0},E=(0,B.__experimentalUseResizeCanvas)(t,o),b=(0,B.useSetting)("layout"),y="is-"+t.toLowerCase()+"-preview";let _,w=o?f:m;E&&(w=E),E||o||(_="40vh");const k=(0,h.useRef)(),C=(0,P.useMergeRefs)([k,(0,B.__unstableUseTypewriter)()]),A=(0,h.useMemo)((()=>o?{type:"default"}:p?{...b,type:"constrained"}:{type:"default"}),[o,p,b]),R=(0,h.useMemo)((()=>{if(!i?.content&&!i?.blocks)return r;if(i?.blocks)return et(i?.blocks);const e="string"==typeof i?.content?i?.content:"";return et((0,N.parse)(e))||{}}),[i?.content,i?.blocks,r]),x=(0,h.useMemo)((()=>{if(!i?.content&&!i?.blocks)return!1;if(i?.blocks)return tt(i?.blocks);const e="string"==typeof i?.content?i?.content:"";return tt((0,N.parse)(e))||!1}),[i?.content,i?.blocks]),{layout:O={},align:M=""}=R||{},L=Ze(R,"core/post-content"),D=I()({"is-layout-flow":!p},p&&L,M&&`align${M}`),F=Xe(R,"core/post-content",".block-editor-block-list__layout.is-root-container"),U=(0,h.useMemo)((()=>O&&("constrained"===O?.type||O?.inherit||O?.contentSize||O?.wideSize)?{...b,...O,type:"constrained"}:{...b,...O,type:"default"}),[O?.type,O?.inherit,O?.contentSize,O?.wideSize,b]),V=r?U:A,z="default"!==V?.type||x?V:A,G=(0,h.useRef)();return(0,h.useEffect)((()=>{!n&&d()&&G?.current?.focus()}),[n,d]),e=(0,h.useMemo)((()=>[...e,{css:".edit-post-visual-editor__post-title-wrapper{margin-top:4rem}"+(_?`body{padding-bottom:${_}}`:"")}]),[e]),(0,g.createElement)(B.BlockTools,{__unstableContentRef:k,className:I()("edit-post-visual-editor",{"is-template-mode":o,"has-inline-canvas":!0})},(0,g.createElement)(S.__unstableMotion.div,{className:"edit-post-visual-editor__content-area",animate:{padding:o?"48px 48px 0":0}},(0,g.createElement)(S.__unstableMotion.div,{animate:w,initial:m,className:y},(0,g.createElement)(Qe,{shouldIframe:!1,contentRef:C,styles:e,height:"100%"},p&&!u&&!o&&(0,g.createElement)(g.Fragment,null,(0,g.createElement)(Je,{selector:".edit-post-visual-editor__post-title-wrapper",layout:A}),(0,g.createElement)(Je,{selector:".block-editor-block-list__layout.is-root-container",layout:z}),M&&(0,g.createElement)(Je,{css:".is-root-container.alignwide { max-width: var(--wp--style--global--wide-size); margin-left: auto; margin-right: auto;}\n\t\t.is-root-container.alignwide:where(.is-layout-flow) > :not(.alignleft):not(.alignright) { max-width: var(--wp--style--global--wide-size);}\n\t\t.is-root-container.alignfull { max-width: none; margin-left: auto; margin-right: auto;}\n\t\t.is-root-container.alignfull:where(.is-layout-flow) > :not(.alignleft):not(.alignright) { max-width: none;}"}),F&&(0,g.createElement)(Je,{layout:U,css:F})),(0,g.createElement)(Ye.Slot,{mode:"visual"}),(0,g.createElement)(B.__experimentalRecursionProvider,{blockName:s,uniqueId:a},(0,g.createElement)(B.BlockList,{className:o?"wp-site-blocks":`${D} wp-block-post-content`,layout:V})),(0,g.createElement)(qe.Slot,{mode:"visual"})))))}var ot=n(42);class rt extends h.Component{constructor(e){super(e),this.edit=this.edit.bind(this),this.stopEditing=this.stopEditing.bind(this),this.state={}}static getDerivedStateFromProps(e,t){return t.isDirty?null:{value:e.value,isDirty:!1}}edit(e){const t=e.target.value;this.props.onChange(t),this.setState({value:t,isDirty:!0})}stopEditing(){this.state.isDirty&&(this.props.onPersist(this.state.value),this.setState({isDirty:!1}))}render(){const{value:e}=this.state,{instanceId:t}=this.props;return(0,g.createElement)(g.Fragment,null,(0,g.createElement)("label",{htmlFor:`post-content-${t}`,className:"screen-reader-text"},(0,b.__)("Type text or HTML")),(0,g.createElement)(ot.Z,{autoComplete:"off",dir:"auto",value:e,onChange:this.edit,onBlur:this.stopEditing,className:"editor-post-text-editor",id:`post-content-${t}`,placeholder:(0,b.__)("Start writing with text or HTML")}))}}const it=(0,P.compose)([(0,v.withSelect)((e=>{const{getBlocks:t}=e("isolated/editor");return{value:(0,N.serialize)(t())}})),(0,v.withDispatch)((e=>{const{updateBlocksWithoutUndo:t}=e("isolated/editor");return{onChange(e){const n=(0,N.parse)(e);t(n)},onPersist(e){const n=(0,N.parse)(e);t(n)}}})),P.withInstanceId])(rt),st=function({}){return(0,g.createElement)("div",{className:"edit-post-text-editor"},(0,g.createElement)("div",{className:"edit-post-text-editor__body"},(0,g.createElement)(Ye.Slot,{mode:"text"}),(0,g.createElement)(it,null),(0,g.createElement)(qe.Slot,{mode:"text"})))},at=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})),lt=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z"})),ct=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),dt=(0,P.compose)([(0,v.withSelect)(((e,{feature:t})=>({isActive:e("isolated/editor").isFeatureActive(t)}))),(0,v.withDispatch)(((e,t)=>({onToggle(){e("isolated/editor").toggleFeature(t.feature),t.onClose()}}))),S.withSpokenMessages])((function({onToggle:e,isActive:t,label:n,info:o,messageActivated:r,messageDeactivated:i,speak:s}){return(0,g.createElement)(S.MenuItem,{icon:t&&D,isSelected:t,onClick:(0,R.flow)(e,(()=>{s(t?i||(0,b.__)("Feature deactivated"):r||(0,b.__)("Feature activated"))})),role:"menuitemcheckbox",info:o},n)})),ut=(0,P.compose)([(0,v.withSelect)(((e,{option:t})=>({isActive:e("isolated/editor").isOptionActive(t)}))),(0,v.withDispatch)(((e,t)=>({onToggle(){e("isolated/editor").toggleOption(t.option),t.onClose()}}))),S.withSpokenMessages])((function({onToggle:e,isActive:t,label:n,info:o}){return(0,g.createElement)(S.MenuItem,{icon:t&&D,isSelected:t,onClick:e,role:"menuitemcheckbox",info:o},n)})),pt=function({onClose:e,settings:t}){const{preview:n,fullscreen:o,topToolbar:r}=t?.iso?.moreMenu||{},{isFullscreen:i}=(0,v.useSelect)((e=>({isFullscreen:e("isolated/editor").isOptionActive("fullscreenMode")})),[]);return o||n||r?(0,g.createElement)(S.MenuGroup,{label:(0,b._x)("View","noun")},r&&(0,g.createElement)(g.Fragment,null,(0,g.createElement)(dt,{feature:"fixedToolbar",label:(0,b.__)("Top toolbar"),info:(0,b.__)("Access all block and document tools in a single place."),messageActivated:(0,b.__)("Top toolbar activated"),messageDeactivated:(0,b.__)("Top toolbar deactivated"),onClose:e})),o&&(0,g.createElement)(ut,{option:"fullscreenMode",label:(0,b.__)("Fullscreen"),info:(0,b.__)("Show editor fullscreen."),onClose:e}),n&&!i&&(0,g.createElement)(ut,{option:"preview",label:(0,b.__)("Preview"),info:(0,b.__)("Preview the content before posting."),onClose:e})):null},mt=(0,P.compose)([(0,v.withSelect)((e=>{const{getEditorMode:t}=e("isolated/editor"),{codeEditingEnabled:n}=e("core/editor").getEditorSettings();return{editorMode:t(),isCodeEditingEnabled:n}})),(0,v.withDispatch)((e=>({onSetMode(t){e("isolated/editor").setEditorMode(t)}})))])((function({onClose:e,editorMode:t,onSetMode:n,isCodeEditingEnabled:o,settings:r}){const i=t=>{n(t),e()};return o&&!1!==r?.iso?.moreMenu&&r?.iso?.moreMenu?.editor?(0,g.createElement)(S.MenuGroup,{label:(0,b._x)("Editor","noun")},(0,g.createElement)(S.MenuItem,{icon:"visual"===t?D:null,isSelected:"visual"===t,onClick:()=>i("visual"),role:"menuitemcheckbox"},(0,b.__)("Visual editor")),(0,g.createElement)(S.MenuItem,{icon:"text"===t?D:null,isSelected:"text"===t,onClick:()=>i("text"),role:"menuitemcheckbox"},(0,b.__)("Code editor"))):null})),ft=function({settings:e}){const{linkMenu:t=[]}=e.iso||{};return 0===t.length?null:(0,g.createElement)(S.MenuGroup,{label:(0,b.__)("Links")},t.map((({title:e,url:t})=>(0,g.createElement)(S.MenuItem,{key:e},(0,g.createElement)(S.ExternalLink,{href:t},e)))))},Et={className:"edit-post-more-menu__content",position:"bottom left"},gt={tooltipPosition:"bottom"},ht=({settings:e,onClick:t,renderMoreMenu:n})=>(0,g.createElement)(S.DropdownMenu,{className:"edit-post-more-menu",icon:ct,label:(0,b.__)("More tools & options"),popoverProps:Et,toggleProps:{...gt,onClick:t}},(({onClose:t})=>(0,g.createElement)(g.Fragment,null,n&&n(e,t),(0,g.createElement)(mt,{onClose:t,settings:e}),(0,g.createElement)(pt,{onClose:t,settings:e}),(0,g.createElement)(ft,{settings:e})))),bt=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),yt=(0,g.createElement)(L.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,g.createElement)(L.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})),_t=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),vt=(0,h.forwardRef)((function(e,t){const n=(0,v.useSelect)((e=>e("isolated/editor").hasEditorRedo()),[]),{redo:o}=(0,v.useDispatch)("isolated/editor");return(0,g.createElement)(S.Button,{...e,ref:t,icon:_t,label:(0,b.__)("Redo"),shortcut:M.displayShortcut.primaryShift("z"),"aria-disabled":!n,onClick:n?o:void 0,className:"editor-history__redo"})})),wt=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})),Tt=(0,h.forwardRef)((function(e,t){const n=(0,v.useSelect)((e=>e("isolated/editor").hasEditorUndo()),[]),{undo:o}=(0,v.useDispatch)("isolated/editor");return(0,g.createElement)(S.Button,{...e,ref:t,icon:wt,label:(0,b.__)("Undo"),shortcut:M.displayShortcut.primary("z"),"aria-disabled":!n,onClick:n?o:void 0,className:"editor-history__undo"})})),St=window.wp.dom;function kt(){return(0,g.createElement)(g.Fragment,null,(0,g.createElement)("div",{className:"editor-list-view-sidebar__outline"},(0,g.createElement)("div",null,(0,g.createElement)(S.__experimentalText,null,(0,b.__)("Characters:")),(0,g.createElement)(S.__experimentalText,null,(0,g.createElement)(T.CharacterCount,null))),(0,g.createElement)("div",null,(0,g.createElement)(S.__experimentalText,null,(0,b.__)("Words:")),(0,g.createElement)(T.WordCount,null)),(0,g.createElement)("div",null,(0,g.createElement)(S.__experimentalText,null,(0,b.__)("Time to read:")),(0,g.createElement)(T.TimeToRead,null))),(0,g.createElement)(T.DocumentOutline,null))}const{Tabs:Ct}=Ae(S.privateApis);function At({canClose:e=!0}){const{setIsListViewOpened:t}=(0,v.useDispatch)("isolated/editor"),n=(0,P.useFocusOnMount)("firstElement"),o=(0,h.useCallback)((()=>{t(!1)}),[t]),r=(0,h.useCallback)((e=>{e.keyCode!==M.ESCAPE||e.defaultPrevented||(e.preventDefault(),o())}),[o]),[i,s]=(0,h.useState)(null),[a,l]=(0,h.useState)("list-view"),c=(0,h.useRef)(),d=(0,h.useRef)(),u=(0,h.useRef)(),p=(0,P.useMergeRefs)([n,u,s]),m=(0,h.useCallback)((()=>{c.current.contains(c.current.ownerDocument.activeElement)?o():function(e){const t=St.focus.tabbable.find(d.current)[0];if("list-view"===e){const e=St.focus.tabbable.find(u.current)[0];(c.current.contains(e)?e:t).focus()}else t.focus()}(a)}),[o,a]);return(0,C.useShortcut)("core/edit-post/toggle-list-view",m),(0,g.createElement)("div",{className:"editor-list-view-sidebar",onKeyDown:r,ref:c},(0,g.createElement)(Ct,{onSelect:e=>l(e),selectOnMove:!1,initialTabId:"list-view"},(0,g.createElement)("div",{className:"edit-post-editor__document-overview-panel__header"},e&&(0,g.createElement)(S.Button,{className:"editor-list-view-sidebar__close-button",icon:G,label:(0,b.__)("Close"),onClick:o}),(0,g.createElement)(Ct.TabList,{className:"editor-list-view-sidebar__tabs-tablist",ref:d},(0,g.createElement)(Ct.Tab,{className:"editor-list-view-sidebar__tabs-tab",tabId:"list-view"},(0,b._x)("List View","Post overview")),(0,g.createElement)(Ct.Tab,{className:"editor-list-view-sidebar__tabs-tab",tabId:"outline"},(0,b._x)("Outline","Post overview")))),(0,g.createElement)(Ct.TabPanel,{ref:p,className:"editor-list-view-sidebar__tabs-tabpanel",tabId:"list-view",focusable:!1},(0,g.createElement)("div",{className:"editor-list-view-sidebar__list-view-container"},(0,g.createElement)("div",{className:"editor-list-view-sidebar__list-view-panel-content"},(0,g.createElement)(B.__experimentalListView,{dropZoneElement:i})))),(0,g.createElement)(Ct.TabPanel,{className:"editor-list-view-sidebar__tabs-tabpanel",tabId:"outline",focusable:!1},(0,g.createElement)("div",{className:"editor-list-view-sidebar__list-view-container"},(0,g.createElement)(kt,null)))))}const It=(0,h.forwardRef)((function({isDisabled:e,...t},n){const o=(0,v.useSelect)((e=>!!e(B.store).getBlockCount()),[])&&!e;return(0,g.createElement)(S.Dropdown,{contentClassName:"block-editor-block-navigation__popover",position:"bottom right",renderToggle:({isOpen:e,onToggle:r})=>(0,g.createElement)(S.Button,{...t,ref:n,icon:yt,"aria-expanded":e,"aria-haspopup":"true",onClick:o?r:void 0
/* translators: button label text should, if possible, be under 16 characters. */,label:(0,b.__)("List view"),className:"block-editor-block-navigation","aria-disabled":!o}),renderContent:()=>(0,g.createElement)(At,{canClose:!1})})})),Pt=e=>{e.preventDefault()},Rt=function(e){const t=(0,h.useRef)(),{setIsInserterOpened:n,setIsListViewOpened:o}=(0,v.useDispatch)("isolated/editor"),r=(0,P.useViewportMatch)("medium","<"),{fixedToolbar:i,isInserterEnabled:s,isTextModeEnabled:a,showIconLabels:l,previewDeviceType:c,isInserterOpened:d,isListViewOpen:u,listViewShortcut:p}=(0,v.useSelect)((e=>{const{hasInserterItems:t,getBlockRootClientId:n,getBlockSelectionEnd:o}=e("core/block-editor"),{isListViewOpened:r}=e("isolated/editor"),{getShortcutRepresentation:i}=e(C.store);return{fixedToolbar:e("isolated/editor").isFeatureActive("fixedToolbar"),isInserterEnabled:"visual"===e("isolated/editor").getEditorMode()&&e("core/editor").getEditorSettings().richEditingEnabled&&t(n(o())),isListViewOpen:r(),isTextModeEnabled:"text"===e("isolated/editor").getEditorMode(),previewDeviceType:"Desktop",isInserterOpened:e("isolated/editor").isInserterOpened(),showIconLabels:!1,listViewShortcut:i("core/edit-post/toggle-list-view")}}),[]),m=(0,P.useViewportMatch)("medium"),{inserter:f,navigation:E,undo:y,selectorTool:_}=e.settings.iso.toolbar,w=e.settings?.iso?.sidebar?.inserter||!1,T=!m||"Desktop"!==c||i?/* translators: accessibility text for the editor toolbar when Top Toolbar is on */
(0,b.__)("Document and block tools"):/* translators: accessibility text for the editor toolbar when Top Toolbar is off */
(0,b.__)("Document tools"),k=(0,h.useCallback)((()=>{n(!d)}),[d,n]),A=(0,h.useCallback)((()=>o(!u)),[o,u]);return(0,g.createElement)(B.NavigableToolbar,{className:"editor-document-tools edit-post-header-toolbar","aria-label":T},(f||y||E||_)&&(0,g.createElement)("div",{className:"editor-document-tools__left edit-post-header-toolbar__left"},f&&(0,g.createElement)(S.ToolbarItem,{ref:t,as:S.Button,className:"editor-document-tools__inserter-toggle",isPressed:d,onMouseDown:Pt,onClick:k,disabled:!s,isPrimary:!0,icon:bt
/* translators: button label text should, if possible, be under 16
    characters. */,label:(0,b._x)("Toggle block inserter","Generic label for block inserter button"),showTooltip:!l}),d&&!w&&(0,g.createElement)(S.Popover,{position:"bottom right",onClose:()=>n(!1),anchor:t.current},(0,g.createElement)(B.__experimentalLibrary,{showMostUsedBlocks:!1,showInserterHelpPanel:!0,onSelect:()=>{r&&n(!1)}})),_&&(0,g.createElement)(B.ToolSelector,null),y&&(0,g.createElement)(S.ToolbarItem,{as:Tt,showTooltip:!l,variant:l?"tertiary":void 0}),y&&(0,g.createElement)(S.ToolbarItem,{as:vt,showTooltip:!l,variant:l?"tertiary":void 0}),E&&!w&&(0,g.createElement)(S.ToolbarItem,{as:It,isDisabled:a}),E&&w&&(0,g.createElement)(S.ToolbarItem,{as:S.Button,className:"edit-post-header-toolbar__list-view-toggle",icon:yt,disabled:a,isPressed:u
/* translators: button label text should, if possible, be under 16 characters. */,label:(0,b.__)("List View"),onClick:A,shortcut:p,showTooltip:!l})))},xt=function({button:e,onToggle:t}){return(0,g.createElement)(S.Popover,{position:"bottom left",className:"iso-inspector",anchor:e?.current,onFocusOutside:function(e){null!==e.target.closest(".block-editor-block-inspector")||e.target.classList.contains("iso-inspector")||(t(!1),e.preventDefault(),e.stopPropagation())}},(0,g.createElement)(_e.Slot,{scope:"isolated/editor"}))},{Fill:Ot,Slot:Nt}=(0,S.createSlotFill)("IsolatedToolbar"),Bt=({children:e})=>(0,g.createElement)(Ot,null,e);Bt.Slot=function(e){return(0,g.createElement)(Nt,null,(e=>e))};const Mt=Bt,Lt=e=>{const t=(0,h.useRef)(null),{settings:n,editorMode:o,renderMoreMenu:r}=e,i=(0,P.useViewportMatch)("huge",">="),s=(0,h.useRef)(),a=(0,P.useViewportMatch)("medium"),{inspector:l}=n.iso?.toolbar||{},{moreMenu:c}=n.iso||{},d=n?.iso?.sidebar?.inspector||!1,{openGeneralSidebar:u,closeGeneralSidebar:p}=(0,v.useDispatch)("isolated/editor"),{setIsInserterOpened:m}=(0,v.useDispatch)("isolated/editor"),{isEditorSidebarOpened:f,isBlockSelected:E,hasBlockSelected:y,isInserterOpened:_,isEditing:w}=(0,v.useSelect)((e=>({isEditing:e("isolated/editor"),isEditorSidebarOpened:e("isolated/editor").isEditorSidebarOpened(),isBlockSelected:!!e("core/block-editor").getBlockSelectionStart(),hasBlockSelected:!!e("core/block-editor").getBlockSelectionStart(),isInserterOpened:e("isolated/editor").isInserterOpened()})),[]),[T,k]=(0,h.useState)(!0);function C(e){e?u(y?"edit-post/block":"edit-post/document"):p()}return(0,h.useEffect)((()=>{E&&k(!1)}),[E]),(0,h.useEffect)((()=>{d||p()}),[]),(0,h.useEffect)((()=>{d||w||E||!f||p()}),[w]),(0,h.useEffect)((()=>{f&&!i&&m(!1)}),[f,i]),(0,h.useEffect)((()=>{!_||i&&d||p()}),[_,i]),(0,g.createElement)("div",{className:"edit-post-editor-regions__header",role:"region",tabIndex:-1},(0,g.createElement)("div",{className:"edit-post-header"},(0,g.createElement)("div",{className:"edit-post-header__toolbar"},(0,g.createElement)(Rt,{settings:n}),a&&(0,g.createElement)(g.Fragment,null,(0,g.createElement)("div",{className:I()("selected-block-tools-wrapper",{"is-collapsed":T})},(0,g.createElement)(B.BlockToolbar,{hideDragHandle:!0})),(0,g.createElement)(S.Popover.Slot,{ref:s,name:"block-toolbar"}),E&&(0,g.createElement)(S.Button,{className:"edit-post-header__block-tools-toggle",icon:T?at:lt,onClick:()=>{k((e=>!e))},label:T?(0,b.__)("Show block tools"):(0,b.__)("Hide block tools")}))),(0,g.createElement)("div",{className:"edit-post-header__settings",ref:t},(0,g.createElement)(Mt.Slot,null),l&&(0,g.createElement)(S.Button,{icon:ke,label:(0,b.__)("Settings"),onClick:()=>C(!f),isPressed:f,"aria-expanded":f,disabled:"text"===o}),f&&!d&&(0,g.createElement)(xt,{button:t,onToggle:C}),c&&(0,g.createElement)(ht,{settings:n,onClick:()=>p(),renderMoreMenu:r}))))},Dt=(0,g.createElement)(L.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,g.createElement)(L.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));function Ft(){const{setIsInserterOpened:e}=(0,v.useDispatch)("isolated/editor"),t=(0,P.useViewportMatch)("medium","<"),n=t?"div":S.VisuallyHidden,[o,r]=(0,P.__experimentalUseDialog)({onClose:()=>e(!1),focusOnMount:null});return(0,g.createElement)("div",{ref:o,...r,className:"edit-widgets-layout__inserter-panel"},(0,g.createElement)(n,{className:"edit-widgets-layout__inserter-panel-header"},(0,g.createElement)(S.Button,{icon:Dt,onClick:()=>e(!1)})),(0,g.createElement)("div",{className:"edit-widgets-layout__inserter-panel-content"},(0,g.createElement)(B.__experimentalLibrary,{showMostUsedBlocks:!1,showInserterHelpPanel:!0,shouldFocusBlock:t})))}const Ut=({editorMode:e})=>{const t=(0,P.useViewportMatch)("medium","<"),{showBlockBreadcrumbs:n,documentLabel:o}=(0,v.useSelect)((e=>{const{getPostTypeLabel:t}=e(T.store);return{showBlockBreadcrumbs:!1,
// translators: Default label for the Document in the Block Breadcrumb.
documentLabel:t()||(0,b._x)("Document","noun")}}),[]);return(0,g.createElement)("div",{className:"edit-post-layout__footer"},n&&!t&&"visual"===e&&(0,g.createElement)(B.BlockBreadcrumb,{rootLabelText:o}),(0,g.createElement)(qe.Slot,null))},{Fill:Vt,Slot:zt}=(0,S.createSlotFill)("IsolatedFooter"),Gt=({children:e})=>(0,g.createElement)(Vt,null,e);Gt.Slot=function(){return(0,g.createElement)(zt,null,(e=>e))};const Ht=Gt,Wt={secondarySidebar:(0,b.__)("Block library"),
/* translators: accessibility text for the editor top bar landmark region. */
header:(0,b.__)("Editor top bar"),
/* translators: accessibility text for the editor content landmark region. */
body:(0,b.__)("Editor content"),
/* translators: accessibility text for the editor settings landmark region. */
sidebar:(0,b.__)("Editor settings"),
/* translators: accessibility text for the editor publish landmark region. */
actions:(0,b.__)("Editor publish"),
/* translators: accessibility text for the editor footer landmark region. */
footer:(0,b.__)("Editor footer")},Yt=(0,v.withDispatch)((e=>{const{redo:t,undo:n}=e("isolated/editor");return{redo:t,undo:n}}))((function(e){var t,n,o;const{isEditing:r,editorMode:i,children:s,undo:a,redo:l,settings:c,renderMoreMenu:d}=e,u=(0,P.useViewportMatch)("medium","<"),p=(0,P.useViewportMatch)("medium"),m=c?.iso?.sidebar?.inspector||!1,f=c?.iso?.sidebar?.inserter||!1,E=null===(t=c?.iso?.header)||void 0===t||t,b=c?.iso?.footer||!1,{sidebarIsOpened:y,fixedToolbar:_,isInserterOpened:w,isListViewOpened:k,showIconLabels:A,isFullscreenActive:R,previousShortcut:x,nextShortcut:O}=(0,v.useSelect)((e=>{const{isFeatureActive:t,isInserterOpened:n,isListViewOpened:o,isOptionActive:r}=e("isolated/editor");return{sidebarIsOpened:!!e(ae).getActiveComplementaryArea("isolated/editor"),fixedToolbar:t("fixedToolbar",c?.editor.hasFixedToolbar),isInserterOpened:n(),isListViewOpened:o(),isFullscreenActive:r("fullscreenMode"),showIconLabels:t("showIconLabels"),previousShortcut:e(C.store).getAllShortcutKeyCombinations("core/edit-post/previous-region"),nextShortcut:e(C.store).getAllShortcutKeyCombinations("core/edit-post/next-region")}}),[]),N=I()("edit-post-layout","is-mode-"+i,{"is-sidebar-opened":y,"is-inserter-opened":w,"has-fixed-toolbar":_,"show-icon-labels":A});(0,h.useEffect)((()=>{const e=document.querySelector("html");return R?e.classList.add("is-fullscreen-mode"):e.classList.remove("is-fullscreen-mode"),()=>{e&&e.classList.remove("is-fullscreen-mode")}}),[R]);const L=E?(0,g.createElement)(Lt,{editorMode:i,settings:c,renderMoreMenu:d}):null,D=null!==(n=c?.iso?.sidebar?.customComponent)&&void 0!==n?n:ze;return(0,g.createElement)(g.Fragment,null,(0,g.createElement)(D,{documentInspector:null!==(o=c?.iso?.toolbar?.documentInspector)&&void 0!==o&&o}),(0,g.createElement)(ve,{isActive:R}),(0,g.createElement)(Se,{className:N,labels:Wt,header:L,secondarySidebar:f?"visual"===i&&w?(0,g.createElement)(Ft,null):"visual"===i&&k?(0,g.createElement)(At,null):null:null,sidebar:(!u||y)&&m&&(0,g.createElement)(_e.Slot,{scope:"isolated/editor"}),notices:(0,g.createElement)(T.EditorSnackbars,null),content:(0,g.createElement)(g.Fragment,null,(0,g.createElement)(T.EditorNotices,null),r&&(0,g.createElement)(g.Fragment,null,(0,g.createElement)(B.BlockEditorKeyboardShortcuts,null),(0,g.createElement)(B.BlockEditorKeyboardShortcuts.Register,null)),(0,g.createElement)(S.KeyboardShortcuts,{bindGlobal:!1,shortcuts:{[M.rawShortcut.primary("z")]:a,[M.rawShortcut.primaryShift("z")]:l}},"visual"===i&&(0,g.createElement)(g.Fragment,null,!p&&(0,g.createElement)(B.BlockToolbar,{hideDragHandle:!0}),(0,g.createElement)(nt,{styles:[]})),"text"===i&&(0,g.createElement)(st,null)),s),footer:b&&(0,g.createElement)(Ut,{editorMode:i}),actions:(0,g.createElement)(Ht.Slot,null),shortcuts:{previous:x,next:O}}))})),Kt=(0,P.compose)([(0,v.withSelect)(((e,t)=>{var n;const{getBlocks:o,getEditorSelection:r,getEditorMode:i,isEditing:s}=e("isolated/editor");return{blocks:null!==(n=t.blocks)&&void 0!==n?n:o(),selection:r(),isEditing:s(),editorMode:i()}})),(0,v.withDispatch)(((e,t)=>{const{updateBlocksWithUndo:n,updateBlocksWithoutUndo:o}=e("isolated/editor"),{onInput:r,onChange:i}=t;return{onChange:(...e)=>{i?.(...e),n(...e)},onInput:(...e)=>{r?.(...e),o(...e)}}}))])((function(e){const{blocks:t,onInput:n,onChange:o,selection:r,isEditing:i,editorMode:s}=e,{children:a,settings:l,renderMoreMenu:c,onLoad:d}=e;return(0,h.useEffect)((()=>{(async()=>{const e=await async function(e,t){var n;return(!(n=t)||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof n.then?new Promise((e=>{e(t?t(N.parse,N.rawHandler):[])})):t).then((t=>function(e,t,n,o){if(void 0===e)return o;if(o&&o.length>0)return o;if(t){const n=((e,t)=>e&&e.find((e=>e.name===t)))(e,t);if(n)return(0,N.parse)(n.content)}return n?(0,N.synchronizeBlocksWithTemplate)(o,n):[]}(e.iso.patterns,e.iso.currentPattern,e.editor.template,t)))}(l,d);e.length>0&&(!t||0===t.length)&&n(e,{isInitialContent:!0})})()}),[]),(0,g.createElement)(B.BlockEditorProvider,{value:t||[],onInput:n,onChange:o,useSubRegistry:!1,selection:r,settings:l.editor},(0,g.createElement)(Yt,{isEditing:i,editorMode:s,settings:l,renderMoreMenu:c},a),(0,g.createElement)(S.Popover.Slot,null))}));function jt(e,t){const n=["core/block-editor","core/editor"];return{dispatch:t=>null===jt.targetDispatch||-1===n.indexOf(t)?e.dispatch(t):jt.targetDispatch(t),select:t=>null===jt.targetSelect||-1===n.indexOf(t)?e.select(t):jt.targetSelect(t)}}jt.targetSelect=null,jt.targetDispatch=null,jt.setEditor=function(e,t){this.targetSelect=e,this.targetDispatch=t},jt.resetEditor=function(){this.targetSelect=null,this.targetDispatch=null};const $t=jt,qt=(0,P.compose)([(0,v.withSelect)((e=>{const{isEditing:t}=e("isolated/editor");return{isEditing:t()}})),(0,v.withDispatch)(((e,t,{select:n})=>({hotSwap:t=>{$t.resetEditor(),t&&$t.setEditor(n,e)}})))])((function({isEditing:e,hotSwap:t}){return(0,h.useEffect)((()=>{t(e)}),[e]),null})),Jt=(0,P.compose)([(0,v.withSelect)(((e,{settings:t})=>{const{isEditorReady:n,getEditorMode:o,isEditing:r,isFeatureActive:i,isOptionActive:s}=e("isolated/editor");return{isEditorReady:n(),editorMode:o(),isEditing:r(),fixedToolbar:i("fixedToolbar",t?.editor.hasFixedToolbar),isPreview:s("preview")}})),(0,v.withDispatch)((e=>{const{setEditing:t}=e("isolated/editor");return{setEditing:t}}))])((function(e){const{children:t,settings:n,className:o,onError:r,renderMoreMenu:i,onLoad:s,onInput:a,onChange:l,blocks:c}=e,{isEditorReady:d,editorMode:u,isEditing:p,setEditing:m,fixedToolbar:f,isPreview:E}=e,[h,{width:b}]=(0,P.useResizeObserver)(),y=I()(o,{"iso-editor":!0,"is-large":!!b&&b>=720,"is-medium":!b||b>=480&&b<720,"is-small":!!b&&b<480,"iso-editor__loading":!d,"iso-editor__selected":p,"block-editor":!0,"edit-post-layout":!0,"has-fixed-toolbar":f,["is-mode-"+u]:!0,"is-preview-mode":E});return(0,g.createElement)("div",{className:y},(0,g.createElement)(T.ErrorBoundary,{onError:r},(0,g.createElement)(qt,null),h,(0,g.createElement)(O,{onOutside:()=>m(!1),onFocus:()=>!p&&m(!0)},(0,g.createElement)(Kt,{blocks:c,settings:n,renderMoreMenu:i,onLoad:s,onInput:a,onChange:l},t))))})),Zt="@@redux-undo/UNDO",Xt="@@redux-undo/REDO",Qt="@@redux-undo/JUMP_TO_FUTURE",en="@@redux-undo/JUMP_TO_PAST",tn="@@redux-undo/JUMP",nn="@@redux-undo/CLEAR_HISTORY",on=()=>({type:Zt}),rn=()=>({type:Xt});function sn(e,t=[]){return Array.isArray(e)?e:"string"==typeof e?[e]:t}function an(e,t,n,o=null){return{past:e,present:t,future:n,group:o,_latestUnfiltered:t,index:e.length,limit:e.length+n.length+1}}let ln,cn;const dn="#9E9E9E",un="#03A9F4",pn="#4CAF50";function mn(e,t,n){return[`%c${e}`,`color: ${t}; font-weight: bold`,n]}function fn(e){ln&&(console.group?cn.next=mn("next history",pn,e):cn.next=["next history",e],function(){const{header:e,prev:t,next:n,action:o,msgs:r}=cn;console.group?(console.groupCollapsed(...e),console.log(...t),console.log(...o),console.log(...n),console.log(...r),console.groupEnd()):(console.log(...e),console.log(...t),console.log(...o),console.log(...n),console.log(...r))}())}function En(...e){ln&&(cn.msgs=cn.msgs.concat([...e,"\n"]))}function gn(e,t){const n=an([],e,[]);return t&&(n._latestUnfiltered=null),n}function hn(e,t){if(t<0||t>=e.future.length)return e;const{past:n,future:o,_latestUnfiltered:r}=e;return an([...n,r,...o.slice(0,t)],o[t],o.slice(t+1))}function bn(e,t){if(t<0||t>=e.past.length)return e;const{past:n,future:o,_latestUnfiltered:r}=e,i=n.slice(0,t),s=[...n.slice(t+1),r,...o];return an(i,n[t],s)}function yn(e,t){return t>0?hn(e,t-1):t<0?bn(e,e.past.length+t):e}const vn=window.wp.isShallowEqual;var wn=n.n(vn);const Tn={editCount:0,selection:null,blocks:null};function Sn(e,t){return e.find((e=>e.clientId===t.clientId))}function kn(e,t){const{type:n,selection:o}=e;if("UPDATE_BLOCKS_WITHOUT_UNDO"===n)return!1;if(!o)return!0;if(wn()(o,t.selection)){const n=Sn(t.blocks,o.selectionStart),r=Sn(e.blocks,o.selectionStart);if(n&&r&&wn()(n.attributes,r.attributes))return!1}return!0}const Cn=function(e,t={}){!function(e){ln=e}(t.debug);const n={limit:void 0,filter:()=>!0,groupBy:()=>null,undoType:Zt,redoType:Xt,jumpToPastType:en,jumpToFutureType:Qt,jumpType:tn,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1,...t,initTypes:sn(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:sn(t.clearHistoryType,[nn])},o=n.neverSkipReducer?(t,n,...o)=>({...t,present:e(t.present,n,...o)}):e=>e;let r;return(t=r,i={},...s)=>{!function(e,t){cn={header:[],prev:[],action:[],next:[],msgs:[]},ln&&(console.group?(cn.header=["%credux-undo","font-style: italic","action",e.type],cn.action=mn("action",un,e),cn.prev=mn("prev history",dn,t)):(cn.header=["redux-undo action",e.type],cn.action=["action",e],cn.prev=["prev history",t]))}(i,t);let a,l=t;if(!r){if(En("history is uninitialized"),void 0===t)return l=gn(e(t,{type:"@@redux-undo/CREATE_HISTORY"},...s),n.ignoreInitialState),En("do not set initialState on probe actions"),fn(l),l;!function(e){return typeof e.present<"u"&&typeof e.future<"u"&&typeof e.past<"u"&&Array.isArray(e.future)&&Array.isArray(e.past)}(t)?(l=r=gn(t,n.ignoreInitialState),En("initialHistory initialized: initialState is not a history",r)):(l=r=n.ignoreInitialState?t:an(t.past,t.present,t.future),En("initialHistory initialized: initialState is a history",r))}switch(i.type){case void 0:return l;case n.undoType:return a=yn(l,-1),En("perform undo"),fn(a),o(a,i,...s);case n.redoType:return a=yn(l,1),En("perform redo"),fn(a),o(a,i,...s);case n.jumpToPastType:return a=bn(l,i.index),En(`perform jumpToPast to ${i.index}`),fn(a),o(a,i,...s);case n.jumpToFutureType:return a=hn(l,i.index),En(`perform jumpToFuture to ${i.index}`),fn(a),o(a,i,...s);case n.jumpType:return a=yn(l,i.index),En(`perform jump to ${i.index}`),fn(a),o(a,i,...s);case function(e,t){return t.indexOf(e)>-1?e:!e}(i.type,n.clearHistoryType):return a=gn(l.present,n.ignoreInitialState),En("perform clearHistory"),fn(a),o(a,i,...s);default:if(a=e(l.present,i,...s),n.initTypes.some((e=>e===i.type)))return En("reset history due to init action"),fn(r),r;if(l._latestUnfiltered===a)return l;if("function"==typeof n.filter&&!n.filter(i,a,l)){const e=an(l.past,a,l.future,l.group);return n.syncFilter||(e._latestUnfiltered=l._latestUnfiltered),En("filter ignored action, not storing it in past"),fn(e),e}const t=n.groupBy(i,a,l);if(null!=t&&t===l.group){const e=an(l.past,a,l.future,l.group);return En("groupBy grouped the action with the previous action"),fn(e),e}return l=function(e,t,n,o){const r=e.past.length+1;En("inserting",t),En("new free: ",n-r);const{past:i,_latestUnfiltered:s}=e,a=n&&n<=r,l=i.slice(a?1:0);return an(null!=s?[...l,s]:l,t,[],o)}(l,a,n.limit,t),En("inserted new state into history"),fn(l),l}}}(((e=Tn,t)=>{switch(t.type){case"UPDATE_BLOCKS_WITHOUT_UNDO":case"UPDATE_BLOCKS_WITH_UNDO":return{...e,editCount:kn(t,e)?e.editCount+1:e.editCount,blocks:t.blocks,selection:t.selection}}return e}),{groupBy:(e,t,n)=>t.editCount}),An={*undo(){return yield on()},*redo(){return yield rn()},*updateBlocksWithUndo(e,t={}){return yield{type:"UPDATE_BLOCKS_WITH_UNDO",blocks:e,...t}},*updateBlocksWithoutUndo(e,t={}){return yield{type:"UPDATE_BLOCKS_WITHOUT_UNDO",blocks:e,...t}}},In={editorMode:"visual",isInserterOpened:!1,isEditing:!1,isListViewOpened:!1,isReady:!1,patterns:[],currentPattern:null,gutenbergTemplate:null,ignoredContent:[],deviceType:"Desktop",canvasStyles:null,isIframePreview:!1,settings:{preferencesKey:null,persistenceKey:null,blocks:{allowBlocks:[],disallowBlocks:[]},disallowEmbed:[],customStores:[],toolbar:{inserter:!0,undo:!0,inspector:!0,navigation:!1,documentInspector:!1,selectorTool:!1},sidebar:{inspector:!1,inserter:!1},moreMenu:{editor:!1,fullscreen:!1,preview:!1,topToolbar:!1},linkMenu:[],currentPattern:null,patterns:[],defaultPreferences:{},allowApi:!1,disableCanvasAnimations:!1}};function Pn(e,t,n){const o=[(0,N.serialize)((0,N.createBlock)("core/paragraph")),(0,N.serialize)((0,N.createBlock)("core/paragraph",{className:""}))],r=((e,t)=>e&&e.find((e=>e.name===t)))(e,t);return r&&o.push((0,N.serialize)((0,N.parse)(r.content))),n&&o.push((0,N.serialize)((0,N.synchronizeBlocksWithTemplate)([],n))),o}const Rn=(e=In,t)=>{switch(t.type){case"SETUP_EDITOR":{const{currentPattern:n,patterns:o}=t.settings.iso;return{...e,patterns:o,currentPattern:n,ignoredContent:Pn(o,n,t.settings.editor.template),gutenbergTemplate:t.settings.editor.template,settings:{...e.settings,...t.settings.iso}}}case"SET_CURRENT_PATTERN":return{...e,currentPattern:t.pattern,ignoredContent:Pn(e.patterns,t.pattern,e.gutenbergTemplate)};case"SET_EDITOR_MODE":return{...e,editorMode:t.editorMode};case"SET_INSERTER_OPEN":return{...e,isInserterOpened:t.isOpen,isInspectorOpened:!1,isListViewOpened:!1};case"SET_INSPECTOR_OPEN":return{...e,isInspectorOpened:t.isOpen,isListViewOpened:!1};case"SET_LISTVIEW_OPEN":return{...e,isInserterOpened:!1,isInspectorOpened:!1,isListViewOpened:t.isOpen};case"SET_EDITING":return{...e,isEditing:t.isEditing};case"SET_EDITOR_READY":return{...e,isReady:t.isReady};case"SET_DEVICE_TYPE":return{...e,deviceType:t.deviceType};case"SET_CANVAS_STYLES":return{...e,canvasStyles:t.canvasStyles};case"SET_IFRAME_PREVIEW":return{...e,isIframePreview:t.isIframePreview}}return e},xn={setReady:e=>({type:"SET_EDITOR_READY",isReady:e}),setEditorMode:e=>({type:"SET_EDITOR_MODE",editorMode:e}),setupEditor:e=>({type:"SETUP_EDITOR",settings:e}),setCurrentPattern:e=>({type:"SET_CURRENT_PATTERN",pattern:e}),setIsInserterOpened:e=>({type:"SET_INSERTER_OPEN",isOpen:e}),setDeviceType:e=>({type:"SET_DEVICE_TYPE",deviceType:e}),setCanvasStyles:e=>({type:"SET_CANVAS_STYLES",canvasStyles:e}),setIsIframePreview:e=>({type:"SET_IFRAME_PREVIEW",isIframePreview:e}),setEditing:e=>({type:"SET_EDITING",isEditing:e}),*openGeneralSidebar(e){yield v.controls.dispatch(ae,"enableComplementaryArea","isolated/editor",e)},*closeGeneralSidebar(){yield v.controls.dispatch(ae,"disableComplementaryArea","isolated/editor")},setIsListViewOpened:e=>({type:"SET_LISTVIEW_OPEN",isOpen:e})},On=xn,Nn=(e,t)=>{if("TOGGLE_FEATURE"===t.type){const{preferencesKey:n,...o}=e,r={...o,[t.feature]:!e[t.feature]||!e[t.feature]};return n&&window.localStorage&&localStorage.setItem(n,JSON.stringify(r)),{preferencesKey:n,...r}}return e},Bn={toggleFeature:e=>({type:"TOGGLE_FEATURE",feature:e})},Mn={},Ln=(e=Mn,t)=>"TOGGLE_OPTION"===t.type?{...e,[t.option]:!e[t.option]||!e[t.option]}:e,Dn={toggleOption:e=>({type:"TOGGLE_OPTION",option:e})};function Fn(e){return e.editor.editorMode}function Un(e){return e.editor.settings}function Vn(e){return e.editor.isReady}function zn(e){return e.editor.currentPattern}function Gn(e){const{currentPattern:t,patterns:n}=e.editor;if(t&&n)for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}function Hn(e){return e.editor.ignoredContent}function Wn(e,t){const{patterns:n=[]}=e.editor;let o=n.find((e=>e.name===t));return o||(o=n.find((e=>e.name.replace("p2/","")===t)),o||null)}function Yn(e){return e.editor.isInserterOpened}const Kn=(0,v.createRegistrySelector)((e=>()=>{const t=e(ae).getActiveComplementaryArea("isolated/editor");return(0,R.includes)(["edit-post/document","edit-post/block"],t)}));function jn(e){return e.editor.isEditing}function $n(e){return e.editor.patterns}function qn(e){return e.editor.isListViewOpened}function Jn(e){return e.editor.deviceType}function Zn(e){return e.editor.canvasStyles}function Xn(e){return e.editor.isIframePreview||["Tablet","Mobile"].includes(e.editor.deviceType)}function Qn(e){return e.blocks.present.blocks}function eo(e){return e.blocks.present.selection}function to(e){return"visual"===Fn(e)&&e.blocks.past.length>0}function no(e){return"visual"===Fn(e)&&e.blocks.future.length>0}function oo(e){return e.blocks.present.editCount}function ro(e,t,n=!1){return void 0===e.preferences[t]?n:e.preferences[t]}function io(e,t){return!!e.options[t]&&e.options[t]}function*so(e){yield function(e){return{type:"CONVERT_BLOCK_TO_STATIC",clientId:e}}(e)}function*ao(e){yield function(e){return{type:"CONVERT_BLOCKS_TO_REUSABLE",clientIds:e}}(e)}function*lo(e){yield function(e){return{type:"DELETE_REUSABLE_BLOCK",id:e}}(e)}function co(e,t){return{type:"SET_EDITING_REUSABLE_BLOCK",clientId:e,isEditing:t}}function uo(e,t){return e.isEditingReusableBlock[t]}const po={actions:c,controls:{CONVERT_BLOCK_TO_STATIC:(0,v.createRegistryControl)((e=>({clientId:t})=>{const n=e.select("core/block-editor").getBlock(t),o=e.select("core").getEditedEntityRecord("postType","wp_block",n.attributes.ref),r=(0,N.parse)(o.content);e.dispatch("core/block-editor").replaceBlocks(n.clientId,r)})),CONVERT_BLOCKS_TO_REUSABLE:(0,v.createRegistryControl)((e=>async function({clientIds:t}){const n={title:(0,b.__)("Untitled Reusable Block"),content:(0,N.serialize)(e.select("core/block-editor").getBlocksByClientId(t)),status:"publish"},o=await e.dispatch("core").saveEntityRecord("postType","wp_block",n),r=(0,N.createBlock)("core/block",{ref:o.id});e.dispatch("core/block-editor").replaceBlocks(t,r),e.dispatch(reusableBlocksStore).__experimentalSetEditingReusableBlock(r.clientId,!0)})),DELETE_REUSABLE_BLOCK:(0,v.createRegistryControl)((e=>async function({id:t}){if(!e.select("core").getEditedEntityRecord("postType","wp_block",t))return;const n=e.select("core/block-editor").getBlocks().filter((e=>(0,N.isReusableBlock)(e)&&e.attributes.ref===t)).map((e=>e.clientId));n.length&&e.dispatch("core/block-editor").removeBlocks(n),await e.dispatch("core").deleteEntityRecord("postType","wp_block",t)}))},reducer:(0,v.combineReducers)({isEditingReusableBlock:function(e={},t){return"SET_EDITING_REUSABLE_BLOCK"===t?.type?{...e,[t.clientId]:t.isEditing}:e}}),selectors:d},mo=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),fo=(e,t)=>({registry:n,dispatch:o})=>{t&&(n.select(z.store).get(e,"isComplementaryAreaVisible")||n.dispatch(z.store).set(e,"isComplementaryAreaVisible",!0),o({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},Eo=e=>({registry:t})=>{t.select(z.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(z.store).set(e,"isComplementaryAreaVisible",!1)},go=(e,t)=>({registry:n})=>{if(!t)return;const o=n.select(z.store).get(e,"pinnedItems");!0!==o?.[t]&&n.dispatch(z.store).set(e,"pinnedItems",{...o,[t]:!0})},ho=(e,t)=>({registry:n})=>{if(!t)return;const o=n.select(z.store).get(e,"pinnedItems");n.dispatch(z.store).set(e,"pinnedItems",{...o,[t]:!1})};function bo(e,t){return function({registry:n}){W()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(z.store).toggle(e,t)}}function yo(e,t,n){return function({registry:o}){W()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),o.dispatch(z.store).set(e,t,!!n)}}function _o(e,t){return function({registry:n}){W()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(z.store).setDefaults(e,t)}}const vo=(0,v.createRegistrySelector)((e=>(t,n)=>{const o=e(z.store).get(n,"isComplementaryAreaVisible");if(void 0!==o)return o?t?.complementaryAreas?.[n]:null})),wo=(0,v.createRegistrySelector)((e=>(t,n,o)=>{var r;const i=e(z.store).get(n,"pinnedItems");return null===(r=i?.[o])||void 0===r||r})),To=(0,v.createRegistrySelector)((e=>(t,n,o)=>(W()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(z.store).get(n,o)))),So={reducer:(0,v.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e}}),actions:u,selectors:p};let ko=[];const Co=(0,P.createHigherOrderComponent)((e=>(0,v.withRegistry)((t=>{const{registry:n,settings:o,...r}=t,c=function(e){var t,n,o,r,i,s,a,l,c,d,u,p,m,f,E,g,h,y,_,v;const{iso:w,editor:T}=e;return{iso:{preferencesKey:null!==(t=w?.preferencesKey)&&void 0!==t?t:null,persistenceKey:null!==(n=w?.persistenceKey)&&void 0!==n?n:null,disallowEmbed:null!==(o=w?.disallowEmbed)&&void 0!==o?o:[],customStores:null!==(r=w?.customStores)&&void 0!==r?r:[],blocks:{allowBlocks:null!==(i=w?.blocks?.allowBlocks)&&void 0!==i?i:[],disallowBlocks:null!==(s=w?.blocks?.disallowBlocks)&&void 0!==s?s:[]},toolbar:{inserter:!0,inspector:!1,navigation:!1,documentInspector:!1,undo:!0,selectorTool:!1,...null!==(a=w?.toolbar)&&void 0!==a?a:{}},header:null===(l=w?.header)||void 0===l||l,sidebar:{inserter:!1,inspector:!1,customComponent:null,...null!==(c=w?.sidebar)&&void 0!==c?c:{}},footer:null!==(d=w?.footer)&&void 0!==d&&d,moreMenu:(S=w?.moreMenu,k={editor:!1,fullscreen:!1,preview:!1,topToolbar:!1,...null!==(u=w?.moreMenu)&&void 0!==u?u:{}},!1!==S&&k),linkMenu:null!==(p=w?.linkMenu)&&void 0!==p?p:[],defaultPreferences:{...null!==(m=w?.defaultPreferences)&&void 0!==m?m:{}},allowApi:null!==(f=w?.allowApi)&&void 0!==f&&f,disableCanvasAnimations:null!==(E=w?.disableCanvasAnimations)&&void 0!==E&&E,currentPattern:null!==(g=w?.currentPattern)&&void 0!==g?g:null,patterns:null!==(h=w?.patterns)&&void 0!==h?h:[]},editor:{alignWide:!0,disableCustomColors:!1,disableCustomFontSizes:!1,disablePostFormats:!0,titlePlaceholder:(0,b.__)("Add title"),isRTL:!1,autosaveInterval:60,maxUploadFileSize:0,allowedMimeTypes:[],styles:[{baseURL:"",__unstableType:"theme",css:"body { font-family: 'Noto Serif' }"}],imageSizes:[],richEditingEnabled:!0,codeEditingEnabled:!1,allowedBlockTypes:!0,__experimentalCanUserUseUnfilteredHTML:!1,__experimentalBlockPatterns:[],reusableBlocks:[],fixedToolbar:!0,hasFixedToolbar:!0,hasInlineToolbar:!1,...T,bodyPlaceholder:null!==(y=T?.bodyPlaceholder)&&void 0!==y?y:(0,b.__)("Start writing or type / to choose a block"),availableLegacyWidgets:{},hasPermissionsToManageWidgets:!1,fetchLinkSuggestions:(null!==(_=T?.fetchLinkSuggestions)&&void 0!==_?_:T?.__experimentalFetchLinkSuggestions)?null!==(v=T?.fetchLinkSuggestions)&&void 0!==v?v:T?.__experimentalFetchLinkSuggestions:()=>[]}};var S,k}(o),{persistenceKey:d,preferencesKey:u,defaultPreferences:p,customStores:m=[]}=c.iso||{},[f,E]=(0,h.useState)(null);return(0,h.useEffect)((()=>{const e=(0,v.createRegistry)({"core/reusable-blocks":po,"core/interface":So},n);d&&e.use(v.plugins.persistence,{persistenceKey:d});const t=e.registerStore("isolated/editor",function(e,t){return{reducer:(0,v.combineReducers)({blocks:Cn,editor:Rn,preferences:Nn,options:Ln}),actions:{...An,...On,...Dn,...Bn},selectors:{...s,...i,...a,...l},persist:["preferences"],initialState:{preferences:{preferencesKey:e,...e&&localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):t}}}}(u,p)),o=e.registerStore("core/block-editor",{...B.storeConfig,persist:["preferences"]}),r=e.registerStore("core/editor",{...T.storeConfig,selectors:{...T.storeConfig.selectors,...(c=T.storeConfig.selectors,f=e.select,{getEditedPostAttribute:(e,t)=>"content"===t?(0,N.serialize)(f("core/block-editor").getBlocks()):c.getEditedPostAttribute(e,t),getEditedPostContent:()=>(0,N.serialize)(f("core/block-editor").getBlocks())})},persist:["preferences"]});var c,f;return m.map((t=>{ko.push(e.registerStore(t.name,t.config))})),ko.push(t),ko.push(o),ko.push(r),E(e),function(){ko=ko.filter((e=>e!==t))}}),[n]),f?(0,g.createElement)(v.RegistryProvider,{value:f},(0,g.createElement)(e,{...r,settings:c})):null}))),"withRegistryProvider"),Ao=Co;function Io(e,t){return e&&e.allowBlocks&&e.allowBlocks.length>0?e.allowBlocks:t.map((e=>e.name))}function Po(e,t,n,o){const r=(i=t.blocks)&&i.disallowBlocks?i.disallowBlocks:[];var i;return{...e,fixedToolbar:o,hasFixedToolbar:o,allowedBlockTypes:Io(t.blocks,n).filter((e=>-1===r.indexOf(e)))}}const Ro=(0,P.compose)([(0,v.withSelect)((e=>{const{getCurrentPattern:t}=e("isolated/editor");return{currentPattern:t()}})),(0,v.withDispatch)((e=>{const{updateBlocksWithoutUndo:t}=e("isolated/editor");return{updateBlocksWithoutUndo:t}}))])((function(e){const{currentPattern:t,updateBlocksWithoutUndo:n}=e,o=(0,h.useRef)(null);return(0,h.useEffect)((()=>{null!==t&&o.current!==t?(o.current=t.name,setTimeout((()=>{n((0,N.parse)(t.content))}),0)):o.current=t}),[t]),null})),xo=function(e){const{onSaveBlocks:t,onSaveContent:n}=e,o=(0,h.useRef)(!0),{setReady:r}=(0,v.useDispatch)("isolated/editor"),{blocks:i,ignoredContent:s}=(0,v.useSelect)((e=>({blocks:e("isolated/editor").getBlocks(),ignoredContent:e("isolated/editor").getIgnoredContent()})),[]);function a(){t?.(i,s),n?.((0,N.serialize)(i))}return(0,h.useEffect)((()=>{i?o.current?(o.current=!1,r(!0),i&&i.length>1&&a()):a():r(!0)}),[i]),null},Oo=window.wp.apiFetch;var No=n.n(Oo);function Bo({undoManager:e}={}){window.isoInitialisedBlocks||(window.isoInitialised||((0,k.registerCoreBlocks)(),window.isoInitialised=!0),(0,v.use)($t,{}),No().use(No().createPreloadingMiddleware({OPTIONS:{"/wp/v2/blocks":{body:[]},"/wp/v2/templates":{body:[]}},"/wp/v2/types?context=view":{body:{post:{capabilities:{edit_post:"edit_post"},description:"",hierarchical:!1,viewable:!0,name:"Posts",slug:"post",labels:{name:"Posts",singular_name:"Post"},supports:{title:!1,editor:!0,author:!1,thumbnail:!1,excerpt:!1,trackbacks:!1,"custom-fields":!1,comments:!1,revisions:!1,"post-formats":!1,"geo-location":!1},taxonomies:[],rest_base:"posts"}}},"/wp/v2/types?context=edit":{body:{post:{capabilities:{edit_post:"edit_post"},description:"",hierarchical:!1,viewable:!0,name:"Posts",slug:"post",labels:{name:"Posts",singular_name:"Post"},supports:{title:!1,editor:!0,author:!1,thumbnail:!1,excerpt:!1,trackbacks:!1,"custom-fields":!1,comments:!1,revisions:!1,"post-formats":!1,"geo-location":!1},taxonomies:[],rest_base:"posts"}}},"/wp/v2/posts/0?context=edit":{body:{id:0,type:"post"}},"/wp/v2/posts?context=edit":{body:{id:0,type:"post"}},"/wp/v2/templates":()=>({}),"/wp/v2/types/post?context=edit":()=>({})})),window.isoInitialisedBlocks=!0)}const Mo=Ao((function(e){const{children:t,onSaveContent:n,onSaveBlocks:o,__experimentalUndoManager:r,__experimentalOnInput:i,__experimentalOnChange:s,__experimentalValue:a,__experimentalOnSelection:l,...c}=e;Bo({undoManager:r});const d=function(e){const{undo:t,setupEditor:n}=(0,v.useDispatch)("isolated/editor"),{updateEditorSettings:o,setEditedPost:r}=(0,v.useDispatch)("core/editor"),{updateSettings:i}=(0,v.useDispatch)("core/block-editor"),{isEditing:s,topToolbar:a,currentSettings:l}=(0,v.useSelect)((n=>{const{isEditing:o,isFeatureActive:r}=n("isolated/editor"),{getBlockTypes:i}=n(N.store),s=i(),a=r("fixedToolbar",e?.editor.hasFixedToolbar);return{isEditing:o(),topToolbar:a,currentSettings:{...e,editor:{...Po(e.editor,e.iso,s,void 0!==e.iso?.defaultPreferences?.fixedToolbar?e.iso?.defaultPreferences?.fixedToolbar:a),__experimentalReusableBlocks:[],__experimentalFetchReusableBlocks:!1,__experimentalUndo:t}}}}),[e]);return(0,h.useEffect)((()=>{var e;void 0===window.__editorAssets&&(window.__editorAssets={styles:"",scripts:""}),n(l),i((e=l).editor),o(e.editor),r("post",0)}),[]),(0,h.useEffect)((()=>{s&&i(l)}),[s,a,l?.editor?.reusableBlocks]),e}(e.settings),u=(0,v.useSelect)((e=>({start:e("core/block-editor").getSelectionStart(),end:e("core/block-editor").getSelectionEnd()})),[]);return(0,h.useEffect)((()=>{l?.(u)}),[u]),(0,g.createElement)(h.StrictMode,null,(0,g.createElement)(xo,{onSaveBlocks:o,onSaveContent:n}),(0,g.createElement)(Ro,null),(0,g.createElement)(S.SlotFillProvider,null,(0,g.createElement)(Jt,{...c,onInput:i,onChange:s,blocks:a,settings:d},t)))})),Lo="bp/activity",Do=e=>e.activeComponents||[],Fo=e=>e.user||{},Uo=e=>e.groups||[],Vo=e=>e.content||"",zo=e=>e.edits||{},Go=e=>e.blocks||[],Ho=e=>e.inserting||!1,Wo=e=>e.created||{},Yo=e=>e.date||"",Ko=e=>(0,R.find)(e.groups||[],{id:e.groupId||0}),jo={SET_ACTIVE_COMPONENTS:"SET_ACTIVE_COMPONENTS",GET_CURRENT_USER:"GET_CURRENT_USER",GET_USER_GROUPS:"GET_USER_GROUPS",FETCH_FROM_API:"FETCH_FROM_API",CREATE_FROM_API:"CREATE_FROM_API",UPDATE_FROM_API:"UPDATE_FROM_API",UPDATE_CONTENT:"UPDATE_CONTENT",UPDATE_ACTIVITY_EDITS:"UPDATE_ACTIVITY_EDITS",RESET_CREATED:"RESET_CREATED",SET_ACTIVITY_DATE:"SET_ACTIVITY_DATE",SET_ACTIVITY_GROUP:"SET_ACTIVITY_GROUP",RESET_ACTIVITY_GROUP:"RESET_ACTIVITY_GROUP",SAVE_START:"SAVE_START",SAVE_END:"SAVE_END",ADD_ERROR:"ADD_ERROR"};function $o(e){return{type:jo.SET_ACTIVE_COMPONENTS,list:e}}function*qo(e){let t,n=!0;yield{type:jo.SAVE_START,inserting:n,activity:e};try{t=e.id?yield er("/buddypress/v1/activity/"+e.id,e):yield Qo("/buddypress/v1/activity",e)}catch(n){t=(0,R.assignIn)({id:(0,R.uniqueId)(),error:n.message},e),yield{type:jo.ADD_ERROR,created:t}}n=!1,yield{type:jo.SAVE_END,inserting:n,created:t}}function Jo(e){return{type:jo.GET_CURRENT_USER,user:e}}function Zo(e){return{type:jo.GET_USER_GROUPS,groups:e}}function Xo(e,t){return{type:jo.FETCH_FROM_API,path:e,parse:t}}function Qo(e,t){return{type:jo.CREATE_FROM_API,path:e,data:t}}function er(e,t){return{type:jo.UPDATE_FROM_API,path:e,data:t}}function tr(e){return{type:jo.UPDATE_CONTENT,content:e}}function nr(e){return{type:jo.UPDATE_ACTIVITY_EDITS,activity:e}}function or(){return{type:jo.RESET_CREATED}}function rr(e){return{type:jo.SET_ACTIVITY_DATE,date:e}}function ir(e){return{type:jo.SET_ACTIVITY_GROUP,groupId:e}}function sr(){return{type:jo.RESET_ACTIVITY_GROUP}}function*ar(){const e=yield Xo("/buddypress/v1/members/me?context=edit",!0);yield Jo(e)}function*lr(){const e=yield Xo("/buddypress/v1/groups/me?context=edit",!0);yield Zo(e)}const cr={user:{},content:"",date:"",inserting:!1,created:{},activeComponents:[],groups:[],groupId:0,edits:{}},dr={FETCH_FROM_API:({path:e,parse:t})=>No()({path:e,parse:t}),CREATE_FROM_API:({path:e,data:t})=>No()({path:e,method:"POST",data:t}),UPDATE_FROM_API:({path:e,data:t})=>No()({path:e,method:"PUT",data:t})};(0,v.registerStore)(Lo,{reducer:(e=cr,t)=>{switch(t.type){case jo.SET_ACTIVE_COMPONENTS:return{...e,activeComponents:t.list};case jo.GET_CURRENT_USER:return{...e,user:t.user};case jo.GET_USER_GROUPS:return{...e,groups:t.groups};case jo.SAVE_START:return{...e,inserting:t.inserting,created:t.created};case jo.SAVE_END:return{...e,inserting:t.inserting,created:t.created[0]?t.created[0]:e.created,content:"",date:"",groupId:0,blocks:[]};case jo.ADD_ERROR:return{...e,created:{...t.created}};case jo.UPDATE_CONTENT:return{...e,content:t.content,created:{}};case jo.UPDATE_ACTIVITY_EDITS:return{...e,content:t.activity.content,date:t.activity.date_recorded,groupId:"item_id"in t.activity&&"groups"===t.activity.component?t.activity.item_id:0,edits:t.activity};case jo.SET_ACTIVITY_DATE:return{...e,date:t.date};case jo.SET_ACTIVITY_GROUP:return{...e,groupId:t.groupId};case jo.RESET_ACTIVITY_GROUP:return{...e,groupId:0};case jo.RESET_CREATED:return{...e,created:{}}}return e},actions:f,selectors:m,controls:dr,resolvers:E});const ur=Lo,{blockComponents:{AutoCompleter:pr}}=bp,mr={public:(0,b.__)("Public","bp-activity-block-editor"),private:(0,b.__)("Private","bp-activity-block-editor"),hidden:(0,b.__)("Hidden","bp-activity-block-editor")},fr=e=>e&&e.status&&mr[e.status]?mr[e.status]:null,Er=()=>{const{isGroupsActive:e,userGroups:t,group:n,user:o}=(0,v.useSelect)((e=>{const t=e(ur),n=-1!==t.getActiveComponents().indexOf("groups");return{isGroupsActive:n,userGroups:n?t.getUserGroups():[],group:t.getActivityGroup(),user:t.getCurrentUser()}}),[]),[r,i]=(0,h.useState)(n?"groups":"activity"),{setActivityGroup:s,resetActivityGroup:a}=(0,v.useDispatch)(ur);let l=[{label:(0,b.__)("my Profile","bp-activity-block-editor"),value:"activity"}];return e&&0!==t.length&&l.push({label:(0,b.__)("a Group","bp-activity-block-editor"),value:"groups"}),(0,g.createElement)(S.Panel,null,(0,g.createElement)(S.PanelBody,{className:"activity-editor-sidebar__sharing-preferences-panel",title:(0,b.__)("Sharing preferences","bp-activity-block-editor"),opened:!0},!n&&(0,g.createElement)(S.PanelRow,{className:"activity-editor-sidebar__sharing-preferences-row"},(0,g.createElement)("span",null,(0,b.__)("Post in","bp-activity-block-editor")),(0,g.createElement)(S.SelectControl,{value:r,options:l,onChange:e=>i(e)})),"activity"===r&&(0,g.createElement)(S.PanelRow,{className:"activity-editor-sidebar__sharing-preferences-help-row"},(0,g.createElement)("p",{className:"description"},(0,b.__)("Posting an activity in your Profile will make it available from your Activity Profile page and more widely into the Activity directory.","bp-activity-block-editor"))),"groups"===r&&!n&&(0,g.createElement)(h.Fragment,null,(0,g.createElement)(S.PanelRow,{className:"activity-editor-sidebar__group-selection-help-row"},(0,g.createElement)("p",{className:"description"},(0,b.__)("Start typing the name of the group you want to post your activity into.","bp-activity-block-editor"))),(0,g.createElement)(S.PanelRow,{className:"activity-editor-sidebar__group-selection-input-row"},(0,g.createElement)(pr,{component:"groups",objectQueryArgs:{show_hidden:!0,user_id:o.id},slugValue:fr,ariaLabel:(0,b.__)("Group's name","bp-activity-block-editor"),placeholder:(0,b.__)("Enter Group's name here","bp-activity-block-editor"),onSelectItem:({itemID:e})=>s(e),useAvatar:!0}),(0,g.createElement)(S.Button,{className:"activity-editor-sidebar__group-selection-cancel",onClick:()=>i("activity"),isLink:!0},(0,g.createElement)(S.Dashicon,{icon:"dismiss"}),(0,g.createElement)("span",{className:"screen-reader-text"},(0,b.__)("Dismiss group search","bp-activity-block-editor"))))),!!n&&!!n.id&&(0,g.createElement)(S.PanelRow,{className:"activity-editor-sidebar__selected-group"},(0,g.createElement)("span",null,(0,b.__)("Post in","bp-activity-block-editor")),(0,g.createElement)(S.ExternalLink,{href:n.link},n.name),(0,g.createElement)(S.Button,{className:"activity-editor-sidebar__selected-group-cancel",onClick:()=>("groups"!==r&&i("groups"),void a()),isLink:!0},(0,g.createElement)(S.Dashicon,{icon:"dismiss"}),(0,g.createElement)("span",{className:"screen-reader-text"},(0,b.__)("Remove Group","bp-activity-block-editor")))),"groups"===r&&(0,g.createElement)(S.PanelRow,{className:"activity-editor-sidebar__sharing-preferences-help-row"},(0,g.createElement)("p",{className:"description"},(0,b.__)("Posting an activity in a Group you are a member of will make it available from the Groups activity page. It will also be reachable from your Activity Profile page and more widely into the Activity directory.","bp-activity-block-editor"),(0,g.createElement)("br",null),(0,b.__)('NB: Into the Activity directory, use the "My Groups" tab to see activities shared into Private or hidden groups.',"bp-activity-block-editor")))))},gr=({parentActivity:e})=>{const{content:t,isInserting:n,user:o,group:r,activityEdits:i}=(0,v.useSelect)((e=>{const t=e(ur);return{content:t.getContent(),isInserting:t.isInsertingActivity(),user:t.getCurrentUser(),group:t.getActivityGroup(),activityEdits:t.getActivityEdits()}}),[]),{saveActivity:s,updateActivityEdits:a}=(0,v.useDispatch)(ur),{resetBlocks:l}=(0,v.useDispatch)("core/block-editor"),c=!t||n||!!i.blocks&&(t===(0,N.serialize)(i.blocks)||t===i.content),d=!!n;let u=(0,b.__)("Post Update","bp-activity-block-editor");return i.id?u=(0,b.__)("Update Activity","bp-activity-block-editor"):e&&e.id&&(u=(0,b.__)("Reply","bp-activity-block-editor")),(0,g.createElement)("div",{className:"activity-editor-footer__action-buttons"},(0,g.createElement)(S.Button,{className:"activity-editor-footer__reset-button",variant:"secondary",disabled:c,onClick:()=>{i.blocks?(a(i),l(i.blocks)):l([])}},(0,b.__)("Cancel","bp-activity-block-editor")),(0,g.createElement)(S.Button,{className:"activity-editor-footer__publish-button",variant:"primary",disabled:c,isBusy:d,onClick:()=>(()=>{const n={user_id:o.id,type:"activity_update",component:"activity",content:t};if((e&&e.id||i.type&&"activity_comment"===i.type)&&(n.type="activity_comment",i.type?(n.primary_item_id=i.item_id,n.secondary_item_id=i.secondary_item_id):n.primary_item_id=e.id),r&&r.id&&(n.primary_item_id=r.id,n.component="groups"),i.id&&(n.id=i.id,n.date=i.date),d||s(n),i.id){const e=(0,R.merge)(i,{component:n.component,content:n.content,item_id:n.primary_item_id?n.primary_item_id:0,blocks:(0,N.parse)(n.content)});a(e)}else l([])})()},u))},hr=()=>{const e=(0,v.useSelect)((e=>e(ur).getCurrentUser()),[]);let t=(0,g.createElement)(S.Dashicon,{icon:"buddicons-activity"});return e.avatar_urls&&e.avatar_urls.thumb&&(t=(0,g.createElement)("img",{src:e.avatar_urls.thumb.replaceAll("&#038;","&")})),(0,g.createElement)("div",{className:"activity-editor-user-avatar__container"},(0,g.createElement)(S.Button,{className:"activity-editor-user-avatar__button",href:e.link,label:(0,b.sprintf)(/* translators: %s is the user's name */
(0,b.__)("View all %ss activities","buddypress"),e.name)},t))};class br extends h.Component{render(){return(0,h.createPortal)(this.props.children,document.querySelector("#bp-activity-block-editor-notices"))}}const yr=br,_r=()=>{const{updateContent:e}=(0,v.useDispatch)(ur),{resetBlocks:t}=(0,v.useDispatch)("core/block-editor"),n=(0,v.useSelect)((e=>e("core/block-editor").getSettings()),[]),{activityPosted:o,activityEdits:r}=(0,v.useSelect)((e=>{const t=e(ur);return{activityPosted:t.getJustPostedActivity(),activityEdits:t.getActivityEdits()}}),[]);if(o.link)return!n.hasActivityWall||r.blocks?(0,g.createElement)(yr,null,(0,g.createElement)(S.Notice,{status:"success",isDismissible:!1,actions:[{label:(0,b.__)("View Activity","bp-activity-block-editor"),url:o.link}]},(0,g.createElement)("p",null,r.blocks?(0,b.__)("Activity successfully updated","bp-activity-block-editor"):(0,b.__)("Activity successfully posted","bp-activity-block-editor")))):(o.message="postedBPActivity",n.isDialog?window.parent.postMessage(o,window.parent.location.href):window.postMessage(o,"*"),null);if(o.error){let n=[];return r.blocks||(n=[{label:(0,b.__)("Restore Activity content","bp-activity-block-editor"),onClick:()=>{(n=>{const o=(0,N.parse)(n.content);t(o),e(n.content)})(o)}}]),(0,g.createElement)(yr,null,(0,g.createElement)(S.Notice,{status:"error",isDismissible:!1,actions:n},(0,g.createElement)("p",null,o.error)))}return null},vr=({settings:e})=>{const{editor:{activeComponents:t,activityEdit:n,parentActivity:o}}=e,{setActiveComponents:r,updateContent:i,updateActivityEdits:s}=(0,v.useDispatch)(ur),a=(0,v.useSelect)((e=>e(ur).getActiveComponents()),[]);return a&&0!==a.length||r(t),(0,g.createElement)(Mo,{settings:e,onSaveContent:e=>i(e),onLoad:e=>(e=>{let t="";return null!==n&&n.content&&(n.blocks=e(n.content),s(n),t=n.blocks),t})(e),onError:()=>document.location.reload()},!o&&(0,g.createElement)(Be,null,(0,g.createElement)(Er,null)),(0,g.createElement)(_r,null),(0,g.createElement)(Ye,null,(0,g.createElement)(hr,null)),(0,g.createElement)(qe,null,(0,g.createElement)(gr,{parentActivity:o})))};_()((function(){const e=document.querySelector("#bp-activity-block-editor"),t=(0,h.createRoot)(e),n=window.bpActivityBlockEditor||{};["core/text-color","core/keyboard","core/subscript","core/superscript"].forEach((e=>{(0,w.unregisterFormatType)(e)})),t.render((0,g.createElement)(vr,{settings:n}))}))},934:e=>{e.exports=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,(function(e,t){return t.toUpperCase()}))]}},303:(e,t,n)=>{var o=n(934);e.exports=function(e){var t=o(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var r=e.style.lineHeight;e.style.lineHeight=t+"em",t=o(e,"line-height"),n=parseFloat(t,10),r?e.style.lineHeight=r:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var i=e.nodeName,s=document.createElement(i);s.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&s.setAttribute("rows","1");var a=o(e,"font-size");s.style.fontSize=a,s.style.padding="0px",s.style.border="0px";var l=document.body;l.appendChild(s),n=s.offsetHeight,l.removeChild(s)}return n}},703:(e,t,n)=>{"use strict";var o=n(414);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},857:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};t.__esModule=!0;var a=n(196),l=n(697),c=n(367),d=n(303),u="autosize:resized",p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lineHeight:null},t.textarea=null,t.onResize=function(e){t.props.onResize&&t.props.onResize(e)},t.updateLineHeight=function(){t.textarea&&t.setState({lineHeight:d(t.textarea)})},t.onChange=function(e){var n=t.props.onChange;t.currentValue=e.currentTarget.value,n&&n(e)},t}return r(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.maxRows,o=t.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||o?setTimeout((function(){return e.textarea&&c(e.textarea)})):this.textarea&&c(this.textarea),this.textarea&&this.textarea.addEventListener(u,this.onResize)},t.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(u,this.onResize),c.destroy(this.textarea))},t.prototype.render=function(){var e=this,t=this.props,n=(t.onResize,t.maxRows),o=(t.onChange,t.style),r=(t.innerRef,t.children),l=s(t,["onResize","maxRows","onChange","style","innerRef","children"]),c=this.state.lineHeight,d=n&&c?c*n:null;return a.createElement("textarea",i({},l,{onChange:this.onChange,style:d?i({},o,{maxHeight:d}):o,ref:function(t){e.textarea=t,"function"==typeof e.props.innerRef?e.props.innerRef(t):e.props.innerRef&&(e.props.innerRef.current=t)}}),r)},t.prototype.componentDidUpdate=function(){this.textarea&&c.update(this.textarea)},t.defaultProps={rows:1,async:!1},t.propTypes={rows:l.number,maxRows:l.number,onResize:l.func,innerRef:l.any,async:l.bool},t}(a.Component);t.TextareaAutosize=a.forwardRef((function(e,t){return a.createElement(p,i({},e,{innerRef:t}))}))},42:(e,t,n)=>{"use strict";var o=n(857);t.Z=o.TextareaAutosize},196:e=>{"use strict";e.exports=window.React},967:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,r,i]=e[d],a=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={826:0,431:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[s,a,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(l)var d=l(o)}for(t&&t(n);c<s.length;c++)i=s[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=globalThis.webpackChunkbp_activity_block_editor=globalThis.webpackChunkbp_activity_block_editor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[431],(()=>o(244)));r=o.O(r)})();