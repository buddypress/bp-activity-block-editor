(()=>{"use strict";var t,e={701:()=>{const{template:t}=lodash,e=(t,e)=>{const i=(new DOMParser).parseFromString(t,"text/html");return e?i.documentElement.textContent:i.body.firstChild},{domReady:i,url:{getPath:n}}=wp,s=window.bpActivityWallSettings||{};window.bp=window.bp||{},window.bp.Activity=new class{constructor(t){const{path:e,root:i,nonce:s,preloadedActivity:r,preloadedMember:o,currentActivity:a}=t;this.endpoint=n(i.replace("/wp-json","")+e),this.root=i,this.nonce=s,this.activities="body"in r?r.body:[],this.member="body"in o?o.body:{},this.currentActivity=a,this.container=document.querySelector("#bp-activity-wall-items")}renderItem(e){const i=(n="bp-activity-entry",t(document.querySelector("#tmpl-"+n).innerHTML,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"}));var n;let s=[e.component,e.type];return!(!1 in e.content)&&e.content.rendered||s.push("mini"),"comment_count"in e&&e.comment_count&&s.push("has-comments"),e.activity_class=s.join(" "),e.id_attribute="activity_comment"===e.type?"activity-comment":"activity",i(e)}loop(t){t.forEach((t=>{t.author_link=t._embedded.user[0].link,this.container.innerHTML+=this.renderItem(t)}))}addItem(t){const i=t.data&&t.data.message&&"postedBPActivity"===t.data.message?t.data:null;i&&!this.activities.find((t=>t.id===i.id))&&(delete i.message,"activity_comment"===i.type?(this.activities.push(i),this.container.append(e(this.renderItem(i)))):(this.activities.unshift(i),this.container.prepend(e(this.renderItem(i)))))}togglePopover(t){const e=document.getElementById(t.getAttribute("popovertarget")),i=t.getBoundingClientRect();e.style.top=i.bottom+"px",e.style.left=i.left+"px",e.addEventListener("toggle",(e=>{"open"===e.newState?t.classList.contains("is-open")||t.classList.add("is-open"):t.classList.remove("is-open")}))}catchStreamEvents(t){let e=t.target;if(e.classList.contains("dashicons-ellipsis")&&(e=e.closest("button")),e.getAttribute("popovertarget"))return this.togglePopover(e)}setUpListeners(){window.addEventListener("message",this.addItem.bind(this),!1),this.container.addEventListener("click",this.catchStreamEvents.bind(this),!1)}start(){this.activities&&0!==this.activities.length&&this.loop(this.activities),this.currentActivity&&(document.querySelector("#bp-activity-view").innerHTML=this.renderItem(this.currentActivity)),this.setUpListeners()}}(s),i((()=>window.bp.Activity.start()))}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,n),r.exports}n.m=e,t=[],n.O=(e,i,s,r)=>{if(!i){var o=1/0;for(l=0;l<t.length;l++){for(var[i,s,r]=t[l],a=!0,c=0;c<i.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((t=>n.O[t](i[c])))?i.splice(c--,1):(a=!1,r<o&&(o=r));if(a){t.splice(l--,1);var d=s();void 0!==d&&(e=d)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[i,s,r]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={826:0,431:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var s,r,[o,a,c]=i,d=0;if(o.some((e=>0!==t[e]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(c)var l=c(n)}for(e&&e(i);d<o.length;d++)r=o[d],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(l)},i=globalThis.webpackChunkbp_activity_block_editor=globalThis.webpackChunkbp_activity_block_editor||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=n.O(void 0,[431],(()=>n(701)));s=n.O(s)})();